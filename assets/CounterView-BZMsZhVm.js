import{h as o,H as J,a5 as r,ac as z,a7 as m,n as e,ad as a,v as d,u as V,V as B,a2 as Y,a6 as b,af as D,Z as _,F as ee,ae as te,a0 as ae,P as le,Q as ne}from"./vue-core-BOLQPpeJ.js";import{_ as Q,a as oe,c as se}from"./PromptDialog-D32_C5pB.js";import{f as re,i as ue,e as ie}from"./date-DE_Uv9Lq.js";import{_ as ce}from"./index-BZb2OCg6.js";import"./vuetify-B9nufYXq.js";const O=N=>{if(!N)return"";const h=new Date(N);return re(h,"yyyy-MM-dd")},de={id:"checkin",class:"h-100"},me={class:"ml-3 text-h6 font-weight-bold text-grey-darken-2"},fe={class:"d-flex flex-wrap justify-end w-100"},ve={class:"d-flex justify-space-between w-100"},pe={class:"mt-3 d-flex flex-wrap justify-end w-100"},H={__name:"CheckinForm",props:{activeTab:{type:Object,default:()=>({})}},emits:["closeForm"],setup(N,{emit:h}){const n=N,w=h,F="https://peterhsj.github.io/RentalDemo",i=o(!1),k=o(""),x=o(""),T=o(!1),u=o({startDate:"",endDate:"",carNumber:"",phoneNumber:""}),I=o(null),R=o(),y=o({phoneRules:[t=>!!t||"手機號碼為必填",t=>/^\d{10}$/.test(t)||"請輸入有效的手機號碼"],carRules:[t=>!!t||"車號為必填"],startDateRule:[t=>!!t||"請選擇起始日期",t=>{if(!t||!u.value.endDate)return!0;const l=new Date(t),p=new Date(u.value.endDate);return!l||!p?!0:!ie(l,p)||"起始日期不能晚於結束日期"}],endDateRule:[t=>!!t||"請選擇結束日期",t=>{if(!t||!u.value.startDate)return!0;const l=new Date(u.value.startDate),p=new Date(t);return!l||!p?!0:!ue(p,l)||"結束日期不能早於起始日期"}]}),C=o([{id:"p01",phoneNumber:"",carNumber:"ABC-1234",startDate:"2025-10-01",endDate:"2025-10-01"},{id:"p02",phoneNumber:"",carNumber:"DEF-1234",startDate:"2025-10-01",endDate:"2025-10-01"},{id:"p01",phoneNumber:"0912345678",carNumber:"",startDate:"2025-10-01",endDate:"2025-10-01"},{id:"p02",phoneNumber:"0987654321",carNumber:"",startDate:"2025-10-01",endDate:"2025-10-01"}]),v=o([]),c=()=>{n.activeTab.value==="selfCheckIn"?v.value=C.value.filter(t=>t.phoneNumber!==""):n.activeTab.value==="counterCheckIn"&&(v.value=C.value.filter(t=>t.carNumber!==""))};J(()=>{c()});const $=async()=>{const{valid:t}=await R.value.validate();if(!t)return;const{carNumber:l,startDate:p,endDate:E}=u.value;i.value=!0,k.value="無法登記",x.value="本車號已登記，須先刪除原本登記日期後才能再次申請。",T.value=!1},L=t=>{I.value=t,i.value=!0,n.activeTab.value==="counterCheckIn"&&(k.value="刪除登記車號",x.value=`確認刪除 ${t.carNumber} 申請車號？`),n.activeTab.value==="selfCheckIn"&&(k.value="刪除登記手機號碼",x.value=`確認刪除 ${t.phoneNumber} 申請手機號碼？`),T.value=!0},U=()=>{const t=v.value.findIndex(l=>l.id===I.value.id);t!==-1&&v.value.splice(t,1)},g=()=>{w("closeForm")},P=()=>{i.value=!1,U()},W=()=>{i.value=!1};return(t,l)=>{const p=r("v-icon"),E=r("v-avatar"),q=r("v-text-field"),f=r("v-col"),A=r("v-date-input"),j=r("v-btn"),M=r("v-row"),Z=r("v-form"),G=r("v-list-item"),K=r("v-list"),S=r("v-card"),X=r("v-container");return m(),z("div",de,[e(S,{variant:"outlined",class:"rounded-lg bordered border-md bg-white h-100"},{default:a(()=>[d("div",{class:"px-4 py-3 d-flex align-center bg-orange-lighten-5 rental__header",onClick:g},[e(p,{icon:"fa:fas fa-chevron-left",size:"20",color:"grey-darken-1",class:"mr-2"}),e(E,{image:`${V(F)}${n.activeTab.icon}`,size:"40"},null,8,["image"]),d("span",me,B(n.activeTab.title),1)]),e(X,{class:"pb-2 d-flex flex-column justify-space-between",style:{height:"calc(100% - 64px)"}},{default:a(()=>[e(Z,{ref_key:"checkinFormRef",ref:R,onSubmit:Y($,["prevent"])},{default:a(()=>[e(M,{dense:"",class:"flex-0-1"},{default:a(()=>[n.activeTab.value==="selfCheckIn"?(m(),b(f,{key:0,cols:"12",md:"4"},{default:a(()=>[e(q,{modelValue:u.value.phoneNumber,"onUpdate:modelValue":l[0]||(l[0]=s=>u.value.phoneNumber=s),placeholder:"請輸入登記手機號碼",autocomplete:"off",variant:"outlined",density:"compact",color:"blue-darken-2",rules:y.value.phoneRules,required:""},null,8,["modelValue","rules"])]),_:1})):D("",!0),n.activeTab.value==="counterCheckIn"?(m(),b(f,{key:1,cols:"12",md:"4"},{default:a(()=>[e(q,{modelValue:u.value.carNumber,"onUpdate:modelValue":l[1]||(l[1]=s=>u.value.carNumber=s),rules:y.value.carRules,placeholder:"請輸入車號",autocomplete:"off",variant:"outlined",density:"compact",color:"blue-darken-2","bg-color":"white",required:""},null,8,["modelValue","rules"])]),_:1})):D("",!0),e(f,{cols:"12",md:"4"},{default:a(()=>[e(A,{modelValue:u.value.startDate,"onUpdate:modelValue":l[2]||(l[2]=s=>u.value.startDate=s),rules:y.value.startDateRule,"display-format":V(O),"prepend-icon":"","append-inner-icon":"fa:far fa-calendar-alt",placeholder:"起：2025-10-01",variant:"outlined",density:"compact",color:"blue-darken-2","bg-color":"white",required:""},null,8,["modelValue","rules","display-format"])]),_:1}),e(f,{cols:"12",md:"4"},{default:a(()=>[e(A,{modelValue:u.value.endDate,"onUpdate:modelValue":l[3]||(l[3]=s=>u.value.endDate=s),rules:y.value.endDateRule,"display-format":V(O),"prepend-icon":"","append-inner-icon":"fa:far fa-calendar-alt",placeholder:"迄：2025-10-01",variant:"outlined",density:"compact",color:"blue-darken-2","bg-color":"white",required:""},null,8,["modelValue","rules","display-format"])]),_:1}),e(f,{cols:"12"},{default:a(()=>[d("div",fe,[e(j,{type:"submit",color:"light-green-darken-2",variant:"flat",class:"px-8 w-100 w-sm-auto rounded-lg text-h6 font-weight-regular",height:"40"},{default:a(()=>[...l[5]||(l[5]=[_(" 登記 ",-1)])]),_:1})])]),_:1})]),_:1})]),_:1},512),e(S,{variant:"outlined",class:"mt-5 pa-2 rounded-lg bordered border-md bg-white flex-grow-1 overflow-y-auto"},{default:a(()=>[e(K,null,{default:a(()=>[(m(!0),z(ee,null,te(v.value,(s,he)=>(m(),b(G,{class:"py-2",key:s.id},{default:a(()=>[d("div",ve,[e(M,{"no-gutters":"",class:"flex-grow-1"},{default:a(()=>[e(f,{cols:"12",md:"4",class:"text-h5 font-weight-bold text-grey-darken-1"},{default:a(()=>[_(B(n.activeTab.value==="counterCheckIn"?s.carNumber:s.phoneNumber),1)]),_:2},1024),e(f,{cols:"12",md:"4",class:"rental-subtitle-1 text-blue-darken-3"},{default:a(()=>[_(B(s.startDate),1)]),_:2},1024),e(f,{cols:"12",md:"4",class:"rental-subtitle-1 text-blue-darken-3"},{default:a(()=>[_(B(s.endDate),1)]),_:2},1024)]),_:2},1024),d("div",null,[e(j,{density:"comfortable",variant:"flat",icon:"fa:fas fa-times-circle",class:"text-red-darken-1",onClick:we=>L(s)},null,8,["onClick"])])])]),_:2},1024))),128))]),_:1})]),_:1}),e(M,{"no-gutters":"",class:"flex-0-1"},{default:a(()=>[e(f,{cols:"12"},{default:a(()=>[d("div",pe,[e(j,{color:"blue-darken-3",variant:"flat",class:"my-2 px-8 w-100 w-sm-auto rounded-lg text-h6 font-weight-regular",height:"40",onClick:g},{default:a(()=>[...l[6]||(l[6]=[_(" 完成離開 ",-1)])]),_:1})])]),_:1})]),_:1})]),_:1})]),_:1}),e(Q,{modelValue:i.value,"onUpdate:modelValue":l[4]||(l[4]=s=>i.value=s),message:x.value,messageTitle:k.value,isConfirmBtn:T.value,onPromptConfirm:P,onOnClose:W},null,8,["modelValue","message","messageTitle","isConfirmBtn"])])}}},_e={id:"parkingView",class:"d-flex flex-column bg-grey-lighten-4 h-100"},ge={class:"pt-2 d-flex align-center"},be={__name:"CounterView",setup(N){const h="https://peterhsj.github.io/RentalDemo",n=o({}),w=o(!1),F=o(!1),i=o(!1),k=o(""),x=o(""),T=o(!1),u=v=>{n.value=v,w.value=!0,console.log("tab",n)},I=()=>{n.value={},console.log("close form",n.value),w.value=!1},R=()=>{i.value=!1,isInfo.value=!0,infoStatus.value="success",initForm()},y=()=>{i.value=!1},C=()=>{F.value=window.innerWidth<=960};return J(()=>{C(),window.addEventListener("resize",C)}),ae(()=>{window.removeEventListener("resize",C)}),(v,c)=>{const $=r("v-img"),L=r("v-avatar"),U=r("v-card"),g=r("v-container");return m(),z("div",_e,[le(e(g,{class:"pb-1 rental rental__wrapper"},{default:a(()=>[e(U,{variant:"elevated",elevation:"4",class:"pa-2"},{default:a(()=>[e($,{color:"surface-variant",height:"200",width:"100%",src:`${V(h)}/images/hotel_01.png`,cover:"",alt:"Parking Image"},{default:a(()=>[...c[1]||(c[1]=[d("h1",{class:"ml-6 mt-4 text-h5 font-weight-bold"},[_("住宿車輛"),d("br"),_("預約及臨櫃登記")],-1)])]),_:1},8,["src"]),d("div",ge,[e(L,{image:`${V(h)}/images/profile.svg`,size:"30"},null,8,["image"]),c[2]||(c[2]=d("span",{class:"ml-3 text-subtitle-1 font-weight-bold text-grey-darken-3"}," John Doe 您好！ ",-1))])]),_:1}),w.value?D("",!0):(m(),b(oe,{key:0,tabList:V(se),onSetActiveTab:u},null,8,["tabList"]))]),_:1},512),[[ne,!F.value||!w.value]]),n.value.value==="counterCheckIn"?(m(),b(g,{key:0,id:"counterCheckIn",class:"rental rental__wrapper flex-grow-1 overflow-y-hidden"},{default:a(()=>[e(H,{ref:"searchFormRef",activeTab:n.value,onCloseForm:I},null,8,["activeTab"])]),_:1})):D("",!0),n.value.value==="selfCheckIn"?(m(),b(g,{key:1,id:"selfCheckIn",class:"rental rental__wrapper flex-grow-1 overflow-y-hidden"},{default:a(()=>[e(H,{ref:"searchFormRef",activeTab:n.value,onCloseForm:I},null,8,["activeTab"])]),_:1})):D("",!0),n.value.value==="parkingInfo"?(m(),b(g,{key:2,id:"parkingInfo",class:"rental rental__wrapper"},{default:a(()=>[...c[3]||(c[3]=[_(" parkingInfo ",-1)])]),_:1})):D("",!0),e(Q,{modelValue:i.value,"onUpdate:modelValue":c[0]||(c[0]=P=>i.value=P),message:x.value,messageTitle:k.value,isConfirmBtn:T.value,onPromptConfirm:R,onOnClose:y},null,8,["modelValue","message","messageTitle","isConfirmBtn"])])}}},Ve=ce(be,[["__scopeId","data-v-6d27bf7e"]]);export{Ve as default};
