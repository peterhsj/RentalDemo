import{h as o,a5 as n,ac as $,a7 as _,n as e,ad as t,v as d,V as B,a2 as Z,u as M,Z as p,F as G,ae as K,a6 as D,H as X,a0 as Y,P as ee,af as N,Q as te}from"./vue-core-BOLQPpeJ.js";import{_ as q,a as ae,c as le}from"./PromptDialog-Df1okTK7.js";import{f as ne,i as oe,e as se}from"./date-DE_Uv9Lq.js";import{_ as re}from"./index-dcMGH9dB.js";import"./vuetify-B9nufYXq.js";const A=w=>{if(!w)return"";const s=new Date(w);return ne(s,"yyyy-MM-dd")},ie={id:"checkin",class:"h-100"},ce={class:"ml-3 text-h6 font-weight-bold text-grey-darken-2"},ue={class:"d-flex flex-wrap justify-end w-100"},de={class:"d-flex justify-space-between w-100"},me={class:"mt-3 d-flex flex-wrap justify-end w-100"},S={__name:"CheckinForm",props:{activeTab:{type:Object,default:()=>({})}},emits:["closeForm"],setup(w,{emit:s}){const m=w,V=s,c=o(!1),h=o(""),x=o(""),k=o(!1),r=o({startDate:"",endDate:"",carNumber:""}),y=o(null),T=o(),C=o({carRules:[a=>!!a||"車號為必填"],startDateRule:[a=>!!a||"請選擇起始日期",a=>{if(!a||!r.value.endDate)return!0;const l=new Date(a),f=new Date(r.value.endDate);return!l||!f?!0:!se(l,f)||"起始日期不能晚於結束日期"}],endDateRule:[a=>!!a||"請選擇結束日期",a=>{if(!a||!r.value.startDate)return!0;const l=new Date(r.value.startDate),f=new Date(a);return!l||!f?!0:!oe(f,l)||"結束日期不能早於起始日期"}]}),g=o([{id:"p01",carNumber:"ABC-1234",startDate:"2025-10-01",endDate:"2025-10-01"},{id:"p02",carNumber:"DEF-1234",startDate:"2025-10-01",endDate:"2025-10-01"}]),F=async()=>{const{valid:a}=await T.value.validate();if(!a)return;const{carNumber:l,startDate:f,endDate:U}=r.value;c.value=!0,h.value="無法登記",x.value="本車號已登記，須先刪除原本登記日期後才能再次申請。",k.value=!1},u=a=>{y.value=a,c.value=!0,h.value="刪除登記車號",x.value=`確認刪除 ${a.carNumber} 申請車號？`,k.value=!0},R=()=>{const a=g.value.findIndex(l=>l.id===y.value.id);a!==-1&&g.value.splice(a,1)},I=()=>{V("closeForm")},j=()=>{c.value=!1,R()},b=()=>{c.value=!1};return(a,l)=>{const f=n("v-icon"),U=n("v-avatar"),O=n("v-text-field"),v=n("v-col"),z=n("v-date-input"),L=n("v-btn"),P=n("v-row"),H=n("v-form"),J=n("v-list-item"),Q=n("v-list"),E=n("v-card"),W=n("v-container");return _(),$("div",ie,[e(E,{variant:"outlined",class:"rounded-lg bordered border-md bg-white h-100"},{default:t(()=>[d("div",{class:"px-4 py-3 d-flex align-center bg-orange-lighten-5 rental__header",onClick:I},[e(f,{icon:"fa:fas fa-chevron-left",size:"20",color:"grey-darken-1",class:"mr-2"}),e(U,{image:m.activeTab.icon,size:"40"},null,8,["image"]),d("span",ce,B(m.activeTab.title),1)]),e(W,{class:"pb-2 d-flex flex-column justify-space-between",style:{height:"calc(100% - 64px)"}},{default:t(()=>[e(H,{ref_key:"checkinFormRef",ref:T,onSubmit:Z(F,["prevent"])},{default:t(()=>[e(P,{dense:"",class:"flex-0-1"},{default:t(()=>[e(v,{cols:"12",md:"4"},{default:t(()=>[e(O,{modelValue:r.value.carNumber,"onUpdate:modelValue":l[0]||(l[0]=i=>r.value.carNumber=i),rules:C.value.carRules,placeholder:"請輸入車號",autocomplete:"off",variant:"outlined",density:"compact",color:"blue-darken-2","bg-color":"white",required:""},null,8,["modelValue","rules"])]),_:1}),e(v,{cols:"12",md:"4"},{default:t(()=>[e(z,{modelValue:r.value.startDate,"onUpdate:modelValue":l[1]||(l[1]=i=>r.value.startDate=i),rules:C.value.startDateRule,"display-format":M(A),"prepend-icon":"","append-inner-icon":"fa:far fa-calendar-alt",placeholder:"起：2025-10-01",variant:"outlined",density:"compact",color:"blue-darken-2","bg-color":"white",class:"mb-1",required:""},null,8,["modelValue","rules","display-format"])]),_:1}),e(v,{cols:"12",md:"4"},{default:t(()=>[e(z,{modelValue:r.value.endDate,"onUpdate:modelValue":l[2]||(l[2]=i=>r.value.endDate=i),rules:C.value.endDateRule,"display-format":M(A),"prepend-icon":"","append-inner-icon":"fa:far fa-calendar-alt",placeholder:"迄：2025-10-01",variant:"outlined",density:"compact",color:"blue-darken-2","bg-color":"white",class:"mb-1",required:""},null,8,["modelValue","rules","display-format"])]),_:1}),e(v,{cols:"12"},{default:t(()=>[d("div",ue,[e(L,{type:"submit",color:"light-green-darken-2",variant:"flat",class:"px-8 w-100 w-sm-auto rounded-lg text-h6 font-weight-regular",height:"40"},{default:t(()=>[...l[4]||(l[4]=[p(" 登記 ",-1)])]),_:1})])]),_:1})]),_:1})]),_:1},512),e(E,{variant:"outlined",class:"mt-5 pa-2 rounded-lg bordered border-md bg-white flex-grow-1 overflow-y-auto"},{default:t(()=>[e(Q,null,{default:t(()=>[(_(!0),$(G,null,K(g.value,(i,pe)=>(_(),D(J,{class:"py-2",key:i.id},{default:t(()=>[d("div",de,[e(P,{"no-gutters":"",class:"flex-grow-1"},{default:t(()=>[e(v,{cols:"12",md:"4",class:"text-h5 font-weight-bold text-grey-darken-1"},{default:t(()=>[p(B(i.carNumber),1)]),_:2},1024),e(v,{cols:"12",md:"4",class:"rental-subtitle-1 text-blue-darken-3"},{default:t(()=>[p(B(i.startDate),1)]),_:2},1024),e(v,{cols:"12",md:"4",class:"rental-subtitle-1 text-blue-darken-3"},{default:t(()=>[p(B(i.endDate),1)]),_:2},1024)]),_:2},1024),d("div",null,[e(L,{density:"comfortable",variant:"flat",icon:"fa:fas fa-times-circle",class:"text-red-darken-1",onClick:ge=>u(i)},null,8,["onClick"])])])]),_:2},1024))),128))]),_:1})]),_:1}),e(P,{"no-gutters":"",class:"flex-0-1"},{default:t(()=>[e(v,{cols:"12"},{default:t(()=>[d("div",me,[e(L,{color:"blue-darken-3",variant:"flat",class:"my-2 px-8 w-100 w-sm-auto rounded-lg text-h6 font-weight-regular",height:"40",onClick:I},{default:t(()=>[...l[5]||(l[5]=[p(" 完成離開 ",-1)])]),_:1})])]),_:1})]),_:1})]),_:1})]),_:1}),e(q,{modelValue:c.value,"onUpdate:modelValue":l[3]||(l[3]=i=>c.value=i),message:x.value,messageTitle:h.value,isConfirmBtn:k.value,onPromptConfirm:j,onOnClose:b},null,8,["modelValue","message","messageTitle","isConfirmBtn"])])}}},fe={id:"parkingView",class:"d-flex flex-column bg-grey-lighten-4 h-100"},ve={class:"pt-2 d-flex align-center"},_e={__name:"CounterView",setup(w){const s=o({}),m=o(!1),V=o(!1),c=o(!1),h=o(""),x=o(""),k=o(!1),r=F=>{s.value=F,m.value=!0,console.log("tab",s)},y=()=>{s.value={},console.log("close form",s.value),m.value=!1},T=()=>{c.value=!1,isInfo.value=!0,infoStatus.value="success",initForm()},C=()=>{c.value=!1},g=()=>{V.value=window.innerWidth<=960};return X(()=>{g(),window.addEventListener("resize",g)}),Y(()=>{window.removeEventListener("resize",g)}),(F,u)=>{const R=n("v-img"),I=n("v-icon"),j=n("v-card"),b=n("v-container");return _(),$("div",fe,[ee(e(b,{class:"pb-1 rental rental__wrapper"},{default:t(()=>[e(j,{variant:"elevated",elevation:"4",class:"pa-2"},{default:t(()=>[e(R,{color:"surface-variant",height:"200",width:"100%",src:"https://cdn.vuetifyjs.com/docs/images/cards/purple-flowers.jpg",cover:"",alt:"Parking Image"},{default:t(()=>[...u[1]||(u[1]=[d("h1",{class:"ml-6 mt-4 text-h5"},[p("住宿車輛"),d("br"),p("預約及臨櫃登記")],-1)])]),_:1}),d("div",ve,[e(I,{icon:"fa:fas fa-circle-user",size:"30",color:"grey-darken-2"}),u[2]||(u[2]=d("span",{class:"ml-3 text-subtitle-1 font-weight-bold text-grey-darken-3"}," John Doe 您好！ ",-1))])]),_:1}),m.value?N("",!0):(_(),D(ae,{key:0,tabList:M(le),onSetActiveTab:r},null,8,["tabList"]))]),_:1},512),[[te,!V.value||!m.value]]),s.value.value==="counterCheckIn"?(_(),D(b,{key:0,id:"counterCheckIn",class:"rental rental__wrapper flex-grow-1 overflow-y-hidden"},{default:t(()=>[e(S,{ref:"searchFormRef",activeTab:s.value,onCloseForm:y},null,8,["activeTab"])]),_:1})):N("",!0),s.value.value==="selfCheckIn"?(_(),D(b,{key:1,id:"selfCheckIn",class:"rental rental__wrapper flex-grow-1 overflow-y-hidden"},{default:t(()=>[e(S,{ref:"searchFormRef",activeTab:s.value,onCloseForm:y},null,8,["activeTab"])]),_:1})):N("",!0),s.value.value==="parkingInfo"?(_(),D(b,{key:2,id:"parkingInfo",class:"rental rental__wrapper"},{default:t(()=>[...u[3]||(u[3]=[p(" parkingInfo ",-1)])]),_:1})):N("",!0),e(q,{modelValue:c.value,"onUpdate:modelValue":u[0]||(u[0]=a=>c.value=a),message:x.value,messageTitle:h.value,isConfirmBtn:k.value,onPromptConfirm:T,onOnClose:C},null,8,["modelValue","message","messageTitle","isConfirmBtn"])])}}},ye=re(_e,[["__scopeId","data-v-89b287b3"]]);export{ye as default};
