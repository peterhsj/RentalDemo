import{h as o,a5 as n,ac as E,a7 as h,n as e,ad as t,v as i,u as L,V as C,a6 as R,af as A,a2 as W,Z as $,F as G,ae as K,H as se,a0 as ne,P as oe,Q as re,ah as ue}from"./vue-core-CsbKmrRr.js";import{_ as ie,c as de}from"./TabList-C060IOAN.js";import{a as Y}from"./index-BFZgDbVB.js";import{f as q,_ as ce,C as ve}from"./ChangePassword-BPy9tjjj.js";import{_ as X}from"./PromptDialog-TYGxE2y4.js";import{i as te,e as ae}from"./date-DE_Uv9Lq.js";import{_ as fe}from"./index-BgiTuXJI.js";import"./vuetify-CHkSyw28.js";const ee=O=>{const U=O+"=",x=document.cookie.split(";");for(let _=0;_<x.length;_++){let d=x[_];for(;d.charAt(0)==" ";)d=d.substring(1,d.length);if(d.indexOf(U)==0)return d.substring(U.length,d.length)}return null},me={id:"checkin",class:"h-100"},_e={class:"ml-3 text-h6 font-weight-bold text-grey-darken-2"},pe={class:"d-flex flex-wrap justify-end w-100"},ge={class:"d-flex justify-space-between w-100"},he={class:"mt-3 d-flex flex-wrap justify-end w-100"},be={__name:"CheckinForm",props:{activeTab:{type:Object,default:()=>({})},userID:{type:Number,default:""}},emits:["closeForm"],setup(O,{emit:U}){const x=O,_=U,d="https://peterhsj.github.io/RentalDemo",c=o(!1),y=o(""),b=o(""),V=o(!1),B=o(!1),r=o({license_plate:"",reserve_start_date:"",reserve_end_date:"",note:""}),j=o(null),F=o(),D=o({carRules:[l=>!!l||"車號為必填",l=>/^[A-Z0-9]+-[A-Z0-9]+$/.test(l)||"請輸入有效的車號 ( 需包含 - 符號 )"],startDateRule:[l=>!!l||"請選擇起始日期",l=>{if(!l||!r.value.reserve_end_date)return!0;const a=new Date(l),s=new Date(r.value.reserve_end_date);return!a||!s?!0:!ae(a,s)||"起始日期不能晚於結束日期"}],endDateRule:[l=>!!l||"請選擇結束日期",l=>{if(!l||!r.value.reserve_start_date)return!0;const a=new Date(r.value.reserve_start_date),s=new Date(l);return!a||!s?!0:!te(s,a)||"結束日期不能早於起始日期"}]}),p=o([]),N=async()=>{const{valid:l}=await F.value.validate();if(!l)return;const{license_plate:a,reserve_start_date:s,reserve_end_date:g,note:m}=r.value;let f={license_plate:a,reserve_start_date:q(s),reserve_end_date:q(g),note:m};if(p.value.length>0&&p.value.find(I=>I.license_plate===a)){c.value=!0,y.value="無法登記",b.value="本車號已登記，須先刪除原本登記日期後才能再次申請。",V.value=!1;return}p.value.push(f),F.value.reset()},S=l=>{j.value=l,c.value=!0,y.value="刪除登記車號",b.value=`確認刪除 ${l.license_plate} 申請車號？`,V.value=!0},M=()=>{const l=p.value.findIndex(a=>a.id===j.value.id);l!==-1&&p.value.splice(l,1)},k=async()=>{const l={userId:x.userID,reserve:p.value};if(p.value.length===0){_("closeForm");return}B.value=!0;const a="/member/grand_hotel/register_counter?bQz0fX8f=4ApR34x2wb2CVTNUfsq3";try{const s=await Y.post(a,l),{returnCode:g,message:m,data:f}=s;g===0?_("closeForm"):g===-1&&(y.value="無法登記",b.value=`${m}`,V.value=!1,c.value=!0)}catch(s){console.log({err:s})}finally{B.value=!1}},u=()=>{c.value=!1,M()},T=()=>{c.value=!1};return(l,a)=>{const s=n("v-icon"),g=n("v-avatar"),m=n("v-text-field"),f=n("v-col"),z=n("v-date-input"),I=n("v-btn"),P=n("v-row"),Q=n("v-form"),w=n("v-list-item"),H=n("v-list"),Z=n("v-card"),J=n("v-container");return h(),E("div",me,[e(Z,{variant:"outlined",class:"rounded-lg bordered border-md bg-white h-100"},{default:t(()=>[i("div",{class:"px-4 py-3 d-flex align-center rental__header bg-orange-lighten-5",onClick:a[0]||(a[0]=v=>_("closeForm"))},[e(s,{icon:"fa:fas fa-chevron-left",size:"20",color:"grey-darken-1",class:"mr-2"}),e(g,{image:`${L(d)}${x.activeTab.icon}`,size:"40"},null,8,["image"]),i("span",_e,C(x.activeTab.title),1)]),e(J,{class:"pb-2 d-flex flex-column justify-space-between",style:{height:"calc(100% - 64px)"}},{default:t(()=>[e(Q,{ref_key:"checkinFormRef",ref:F,onSubmit:W(N,["prevent"])},{default:t(()=>[e(P,{dense:"",class:"flex-0-1"},{default:t(()=>[e(f,{cols:"12",md:"4"},{default:t(()=>[e(m,{modelValue:r.value.license_plate,"onUpdate:modelValue":a[1]||(a[1]=v=>r.value.license_plate=v),rules:D.value.carRules,placeholder:"請輸入車號",autocomplete:"off",variant:"outlined",density:"compact",color:"blue-darken-2","bg-color":"white",onInput:a[2]||(a[2]=v=>r.value.license_plate=r.value.license_plate.toUpperCase()),required:""},null,8,["modelValue","rules"])]),_:1}),e(f,{cols:"12",md:"4"},{default:t(()=>[e(z,{modelValue:r.value.reserve_start_date,"onUpdate:modelValue":a[3]||(a[3]=v=>r.value.reserve_start_date=v),rules:D.value.startDateRule,"display-format":L(q),min:new Date,"prepend-icon":"","append-inner-icon":"fa:far fa-calendar-alt",placeholder:"起：2025-10-01",variant:"outlined",density:"compact",color:"blue-darken-2","bg-color":"white",required:""},null,8,["modelValue","rules","display-format","min"])]),_:1}),e(f,{cols:"12",md:"4"},{default:t(()=>[e(z,{modelValue:r.value.reserve_end_date,"onUpdate:modelValue":a[4]||(a[4]=v=>r.value.reserve_end_date=v),rules:D.value.endDateRule,"display-format":L(q),min:new Date,"prepend-icon":"","append-inner-icon":"fa:far fa-calendar-alt",placeholder:"迄：2025-10-01",variant:"outlined",density:"compact",color:"blue-darken-2","bg-color":"white",required:""},null,8,["modelValue","rules","display-format","min"])]),_:1}),e(f,{cols:"12"},{default:t(()=>[i("div",pe,[e(I,{type:"submit",color:"light-green-darken-2",variant:"flat",class:"px-8 w-100 w-sm-auto rounded-lg text-h6 font-weight-regular",height:"40"},{default:t(()=>[...a[6]||(a[6]=[$(" 登記 ",-1)])]),_:1})])]),_:1})]),_:1})]),_:1},512),p.value.length>0?(h(),R(Z,{key:0,variant:"outlined",class:"mt-5 pa-2 rounded-lg bordered border-md bg-white flex-grow-1 overflow-y-auto"},{default:t(()=>[e(H,null,{default:t(()=>[(h(!0),E(G,null,K(p.value,v=>(h(),R(w,{class:"py-2",key:v.id},{default:t(()=>[i("div",ge,[e(P,{"no-gutters":"",class:"align-center flex-grow-1"},{default:t(()=>[e(f,{cols:"12",md:"4",class:"text-h5 font-weight-bold text-grey-darken-1"},{default:t(()=>[$(C(v.license_plate),1)]),_:2},1024),e(f,{cols:"12",md:"4",class:"text-subtitle-1 text-blue-darken-3"},{default:t(()=>[$(C(v.reserve_start_date),1)]),_:2},1024),e(f,{cols:"12",md:"4",class:"text-subtitle-1 text-blue-darken-3"},{default:t(()=>[$(C(v.reserve_end_date),1)]),_:2},1024)]),_:2},1024),i("div",null,[e(I,{density:"comfortable",variant:"flat",icon:"fa:fas fa-times-circle",class:"text-red-darken-1",onClick:le=>S(v)},null,8,["onClick"])])])]),_:2},1024))),128))]),_:1})]),_:1})):A("",!0),e(P,{"no-gutters":"",class:"flex-0-1"},{default:t(()=>[e(f,{cols:"12"},{default:t(()=>[i("div",he,[e(I,{color:"blue-darken-3",variant:"flat",class:"my-2 px-8 w-100 w-sm-auto rounded-lg text-h6 font-weight-regular",height:"40",onClick:k},{default:t(()=>[...a[7]||(a[7]=[$(" 完成離開 ",-1)])]),_:1})])]),_:1})]),_:1})]),_:1})]),_:1}),e(X,{modelValue:c.value,"onUpdate:modelValue":a[5]||(a[5]=v=>c.value=v),message:b.value,messageTitle:y.value,isConfirmBtn:V.value,onPromptConfirm:u,onOnClose:T},null,8,["modelValue","message","messageTitle","isConfirmBtn"])])}}},we={id:"checkin",class:"h-100"},xe={class:"ml-3 text-h6 font-weight-bold text-grey-darken-2"},ye={class:"d-flex flex-wrap justify-end w-100"},ke={class:"d-flex justify-space-between w-100"},Ce={class:"mt-3 d-flex flex-wrap justify-end w-100"},Ve={__name:"SelfCheckinForm",props:{activeTab:{type:Object,default:()=>({})},userID:{type:Number,default:""}},emits:["closeForm"],setup(O,{emit:U}){const x=O,_=U,d="https://peterhsj.github.io/RentalDemo",c=o(!1),y=o(""),b=o(""),V=o(!1),B=o(!1),r=o({phone:"",reserve_start_date:"",reserve_end_date:"",note:""}),j=o(null),F=o(),D=o({phoneRules:[l=>!!l||"手機號碼為必填",l=>/^\d{10}$/.test(l)||"請輸入有效的手機號碼"],startDateRule:[l=>!!l||"請選擇起始日期",l=>{if(!l||!r.value.reserve_end_date)return!0;const a=new Date(l),s=new Date(r.value.reserve_end_date);return!a||!s?!0:!ae(a,s)||"起始日期不能晚於結束日期"}],endDateRule:[l=>!!l||"請選擇結束日期",l=>{if(!l||!r.value.reserve_start_date)return!0;const a=new Date(r.value.reserve_start_date),s=new Date(l);return!a||!s?!0:!te(s,a)||"結束日期不能早於起始日期"}]}),p=o([]),N=async()=>{const{valid:l}=await F.value.validate();if(!l)return;const{phone:a,reserve_start_date:s,reserve_end_date:g,note:m}=r.value,f={phone:a,reserve_start_date:q(s),reserve_end_date:q(g),note:m};if(p.value.length>0&&p.value.find(I=>I.phone===a)){c.value=!0,y.value="無法登記",b.value=`${returnMsg}`,V.value=!1;return}p.value.push(f),F.value.reset()},S=l=>{j.value=l,c.value=!0,y.value="刪除登記手機號碼",b.value=`確認刪除 ${l.phone} 申請手機號碼？`,V.value=!0},M=()=>{const l=p.value.findIndex(a=>a.id===j.value.id);l!==-1&&p.value.splice(l,1)},k=async()=>{const l={userId:x.userID,reserve:p.value};if(p.value.length===0){_("closeForm");return}B.value=!0;const a="/member/grand_hotel/self_register_counter?bQz0fX8f=4ApR34x2wb2CVTNUfsq3";try{const s=await Y.post(a,l),{returnCode:g,message:m,data:f}=s;g===0?_("closeForm"):g===-1&&(c.value=!0,y.value="無法登記",b.value=`${m}`,V.value=!1)}catch(s){console.log({err:s})}finally{B.value=!1}},u=()=>{c.value=!1,M()},T=()=>{c.value=!1};return(l,a)=>{const s=n("v-icon"),g=n("v-avatar"),m=n("v-text-field"),f=n("v-col"),z=n("v-date-input"),I=n("v-btn"),P=n("v-row"),Q=n("v-form"),w=n("v-list-item"),H=n("v-list"),Z=n("v-card"),J=n("v-container");return h(),E("div",we,[e(Z,{variant:"outlined",class:"rounded-lg bordered border-md bg-white h-100"},{default:t(()=>[i("div",{class:"px-4 py-3 d-flex align-center rental__header rental__bg--light-blue",onClick:a[0]||(a[0]=v=>_("closeForm"))},[e(s,{icon:"fa:fas fa-chevron-left",size:"20",color:"grey-darken-1",class:"mr-2"}),e(g,{image:`${L(d)}${x.activeTab.icon}`,size:"40"},null,8,["image"]),i("span",xe,C(x.activeTab.title),1)]),e(J,{class:"pb-2 d-flex flex-column justify-space-between",style:{height:"calc(100% - 64px)"}},{default:t(()=>[e(Q,{ref_key:"checkinFormRef",ref:F,onSubmit:W(N,["prevent"])},{default:t(()=>[e(P,{dense:"",class:"flex-0-1"},{default:t(()=>[e(f,{cols:"12",md:"4"},{default:t(()=>[e(m,{modelValue:r.value.phone,"onUpdate:modelValue":a[1]||(a[1]=v=>r.value.phone=v),placeholder:"請輸入登記手機號碼",autocomplete:"off",variant:"outlined",density:"compact",color:"blue-darken-2",rules:D.value.phoneRules,required:""},null,8,["modelValue","rules"])]),_:1}),e(f,{cols:"12",md:"4"},{default:t(()=>[e(z,{modelValue:r.value.reserve_start_date,"onUpdate:modelValue":a[2]||(a[2]=v=>r.value.reserve_start_date=v),rules:D.value.startDateRule,"display-format":L(q),min:new Date,"prepend-icon":"","append-inner-icon":"fa:far fa-calendar-alt",placeholder:"起：2025-10-01",variant:"outlined",density:"compact",color:"blue-darken-2","bg-color":"white",required:""},null,8,["modelValue","rules","display-format","min"])]),_:1}),e(f,{cols:"12",md:"4"},{default:t(()=>[e(z,{modelValue:r.value.reserve_end_date,"onUpdate:modelValue":a[3]||(a[3]=v=>r.value.reserve_end_date=v),rules:D.value.endDateRule,"display-format":L(q),min:new Date,"prepend-icon":"","append-inner-icon":"fa:far fa-calendar-alt",placeholder:"迄：2025-10-01",variant:"outlined",density:"compact",color:"blue-darken-2","bg-color":"white",required:""},null,8,["modelValue","rules","display-format","min"])]),_:1}),e(f,{cols:"12"},{default:t(()=>[i("div",ye,[e(I,{type:"submit",color:"light-green-darken-2",variant:"flat",class:"px-8 w-100 w-sm-auto rounded-lg text-h6 font-weight-regular",height:"40"},{default:t(()=>[...a[5]||(a[5]=[$(" 登記 ",-1)])]),_:1})])]),_:1})]),_:1})]),_:1},512),p.value.length>0?(h(),R(Z,{key:0,variant:"outlined",class:"mt-5 pa-2 rounded-lg bordered border-md bg-white flex-grow-1 overflow-y-auto"},{default:t(()=>[e(H,null,{default:t(()=>[(h(!0),E(G,null,K(p.value,v=>(h(),R(w,{class:"py-2",key:v.id},{default:t(()=>[i("div",ke,[e(P,{"no-gutters":"",class:"align-center flex-grow-1"},{default:t(()=>[e(f,{cols:"12",md:"4",class:"text-h5 font-weight-bold text-grey-darken-1"},{default:t(()=>[$(C(v.phone),1)]),_:2},1024),e(f,{cols:"12",md:"4",class:"text-subtitle-1 text-blue-darken-3"},{default:t(()=>[$(C(v.reserve_start_date),1)]),_:2},1024),e(f,{cols:"12",md:"4",class:"text-subtitle-1 text-blue-darken-3"},{default:t(()=>[$(C(v.reserve_end_date),1)]),_:2},1024)]),_:2},1024),i("div",null,[e(I,{density:"comfortable",variant:"flat",icon:"fa:fas fa-times-circle",class:"text-red-darken-1",onClick:le=>S(v)},null,8,["onClick"])])])]),_:2},1024))),128))]),_:1})]),_:1})):A("",!0),e(P,{"no-gutters":"",class:"flex-0-1"},{default:t(()=>[e(f,{cols:"12"},{default:t(()=>[i("div",Ce,[e(I,{color:"blue-darken-3",variant:"flat",class:"my-2 px-8 w-100 w-sm-auto rounded-lg text-h6 font-weight-regular",height:"40",onClick:k},{default:t(()=>[...a[6]||(a[6]=[$(" 完成離開 ",-1)])]),_:1})])]),_:1})]),_:1})]),_:1})]),_:1}),e(X,{modelValue:c.value,"onUpdate:modelValue":a[4]||(a[4]=v=>c.value=v),message:b.value,messageTitle:y.value,isConfirmBtn:V.value,onPromptConfirm:u,onOnClose:T},null,8,["modelValue","message","messageTitle","isConfirmBtn"])])}}},De={id:"search",class:"h-100"},$e={class:"ml-3 text-h6 font-weight-bold text-grey-darken-2"},Te={class:"d-flex flex-wrap justify-end w-100"},Ie={class:"d-flex flex-column w-100"},Fe={class:"ml-3 text-amber-darken-3"},Re={class:"ml-3 text-amber-darken-3"},Ue={class:"ml-3 text-amber-darken-3"},Be={class:"ml-3 text-amber-darken-3"},je={class:"ml-3 text-amber-darken-3"},Pe={class:"ml-3 text-amber-darken-3"},Le={class:"mt-3 d-flex flex-wrap justify-end w-100"},ze={__name:"SearchForm",props:{activeTab:{type:Object,default:()=>({})}},emits:["closeForm"],setup(O,{emit:U}){const x=O,_=U,d="https://peterhsj.github.io/RentalDemo",c=o(!1),y=o(""),b=o(""),V=o(!1),B=o(!1),r=o({phone:"",license_plate:""}),j=o(),F=o({phoneRules:[k=>!k||/^\d{10}$/.test(k)||"請輸入有效的手機號碼"],carRules:[k=>!k||/^[A-Z0-9]+-[A-Z0-9]+$/.test(k)||"請輸入有效的車號 ( 需包含 - 符號 )"]}),D=o([]),p=async()=>{const{valid:k}=await j.value.validate();if(!k)return;const{phone:u,license_plate:T}=r.value;if(u===""&&T===""){c.value=!0,y.value="無法登記",b.value="請輸入登記手機號碼或登記車號",V.value=!1;return}const l={phone:u,license_plate:T};B.value=!0;const a="/member/grand_hotel/select_counter?bQz0fX8f=4ApR34x2wb2CVTNUfsq3";try{const s=await Y.post(a,l),{returnCode:g,message:m,data:f}=s;g===0?D.value=f:(c.value=!0,y.value="訊息",b.value=`${m}`,V.value=!1)}catch(s){console.log({err:s})}finally{B.value=!1}},N=()=>{_("closeForm")},S=()=>{c.value=!1},M=()=>{c.value=!1};return(k,u)=>{const T=n("v-icon"),l=n("v-avatar"),a=n("v-text-field"),s=n("v-col"),g=n("v-btn"),m=n("v-row"),f=n("v-form"),z=n("v-list-item"),I=n("v-list"),P=n("v-card"),Q=n("v-container");return h(),E("div",De,[e(P,{variant:"outlined",class:"rounded-lg bordered border-md bg-white h-100"},{default:t(()=>[i("div",{class:"px-4 py-3 d-flex align-center rental__bg--light-blue rental__header",onClick:N},[e(T,{icon:"fa:fas fa-chevron-left",size:"20",color:"grey-darken-1",class:"mr-2"}),e(l,{image:`${L(d)}${x.activeTab.icon}`,size:"40"},null,8,["image"]),i("span",$e,C(x.activeTab.title),1)]),e(Q,{class:"pb-2 d-flex flex-column justify-space-between",style:{height:"calc(100% - 64px)"}},{default:t(()=>[e(f,{ref_key:"searchFormRef",ref:j,onSubmit:W(p,["prevent"])},{default:t(()=>[e(m,{dense:"",class:"flex-0-1"},{default:t(()=>[e(s,{cols:"12",md:"4"},{default:t(()=>[e(a,{modelValue:r.value.phone,"onUpdate:modelValue":u[0]||(u[0]=w=>r.value.phone=w),placeholder:"請輸入登記手機號碼",autocomplete:"off",variant:"outlined",density:"compact",color:"blue-darken-2",rules:F.value.phoneRules},null,8,["modelValue","rules"])]),_:1}),e(s,{cols:"12",md:"4"},{default:t(()=>[e(a,{modelValue:r.value.license_plate,"onUpdate:modelValue":u[1]||(u[1]=w=>r.value.license_plate=w),placeholder:"請輸入車號",autocomplete:"off",variant:"outlined",density:"compact",color:"blue-darken-2","bg-color":"white","hide-details":"auto",rules:F.value.carRules,onInput:u[2]||(u[2]=w=>r.value.license_plate=r.value.license_plate.toUpperCase())},null,8,["modelValue","rules"])]),_:1}),e(s,{cols:"12"},{default:t(()=>[...u[4]||(u[4]=[i("p",{class:"text-subtitle-2 text-red-darken-1"}," 輸入其中之一即可。 ",-1)])]),_:1}),e(s,{cols:"12"},{default:t(()=>[i("div",Te,[e(g,{type:"submit",color:"light-green-darken-2",variant:"flat",class:"px-8 w-100 w-sm-auto rounded-lg text-h6 font-weight-regular",height:"40"},{default:t(()=>[...u[5]||(u[5]=[$(" 查詢 ",-1)])]),_:1})])]),_:1})]),_:1})]),_:1},512),D.value.length>0?(h(),R(P,{key:0,variant:"outlined",class:"mt-5 pa-2 rounded-lg bordered border-md bg-white flex-grow-1 overflow-y-auto"},{default:t(()=>[e(I,null,{default:t(()=>[(h(!0),E(G,null,K(D.value,w=>(h(),R(z,{class:"py-2",key:w.id},{default:t(()=>[i("div",Ie,[e(m,{"no-gutters":"",class:"align-center"},{default:t(()=>[e(s,{cols:"12",md:"4",class:"rental__text--h4 font-weight-bold"},{default:t(()=>[u[6]||(u[6]=i("span",{class:"text-grey-darken-1"},"登記來源",-1)),i("span",Fe,C(w.reserve_type==="2"?"臨櫃":"自助"),1)]),_:2},1024),e(s,{cols:"12",md:"4",class:"rental__text--h4 font-weight-bold"},{default:t(()=>[u[7]||(u[7]=i("span",{class:"text-grey-darken-1"},"登記帳號",-1)),i("span",Re,C(w.reserve_acc),1)]),_:2},1024),e(s,{cols:"12",md:"4",class:"rental__text--h4 font-weight-bold"},{default:t(()=>[u[8]||(u[8]=i("span",{class:"text-grey-darken-1"},"登記日期",-1)),i("span",Ue,C(w.reserve_date),1)]),_:2},1024)]),_:2},1024),e(m,{"no-gutters":"",class:"align-center mt-3"},{default:t(()=>[e(s,{cols:"12",md:"4",class:"rental__text--h4 font-weight-bold"},{default:t(()=>[u[9]||(u[9]=i("span",{class:"text-grey-darken-1"},"車　　號",-1)),i("span",Be,C(w.license_plate),1)]),_:2},1024),e(s,{cols:"12",md:"4",class:"rental__text--h4 font-weight-bold"},{default:t(()=>[u[10]||(u[10]=i("span",{class:"text-grey-darken-1"},"起　　日",-1)),i("span",je,C(w.reserve_start_date),1)]),_:2},1024),e(s,{cols:"12",md:"4",class:"rental__text--h4 font-weight-bold"},{default:t(()=>[u[11]||(u[11]=i("span",{class:"text-grey-darken-1"},"迄　　日",-1)),i("span",Pe,C(w.reserve_end_date),1)]),_:2},1024)]),_:2},1024)])]),_:2},1024))),128))]),_:1})]),_:1})):A("",!0),e(m,{"no-gutters":"",class:"flex-0-1"},{default:t(()=>[e(s,{cols:"12"},{default:t(()=>[i("div",Le,[e(g,{color:"blue-darken-3",variant:"flat",class:"my-2 px-8 w-100 w-sm-auto rounded-lg text-h6 font-weight-regular",height:"40",onClick:N},{default:t(()=>[...u[12]||(u[12]=[$(" 回選單 ",-1)])]),_:1})])]),_:1})]),_:1})]),_:1})]),_:1}),e(X,{modelValue:c.value,"onUpdate:modelValue":u[3]||(u[3]=w=>c.value=w),message:b.value,messageTitle:y.value,isConfirmBtn:V.value,onPromptConfirm:S,onOnClose:M},null,8,["modelValue","message","messageTitle","isConfirmBtn"])])}}},Ae={id:"parkingView",class:"d-flex flex-column bg-grey-lighten-4 h-100"},Oe={class:"pt-2 d-flex align-center"},Ne={class:"ml-3 text-subtitle-1 font-weight-bold text-grey-darken-3"},qe={__name:"CounterView",setup(O){const U="https://peterhsj.github.io/RentalDemo",x=ue(),_=o(null),d=o({}),c=o(!1),y=o(!1),b=o(!1),V=o(""),B=o(""),r=o(!1),j=T=>{d.value=T,c.value=!0,console.log("tab",d),T.value==="logout"&&F()};function F(){d.value={},c.value=!1,document.cookie="memberInfo=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/;",x.push("/CounterLogin")}const D=()=>{d.value={},c.value=!1},p=()=>{d.value={},c.value=!1,x.push("/CounterLogin")},N=()=>{d.value={},c.value=!1},S=()=>{b.value=!1},M=()=>{b.value=!1},k=()=>{y.value=window.innerWidth<=960},u=()=>{if(ee("memberInfo"))_.value=JSON.parse(ee("memberInfo")),console.log("userId",_.value);else{x.push("/CounterLogin");return}};return se(()=>{u(),k(),window.addEventListener("resize",k)}),ne(()=>{window.removeEventListener("resize",k)}),(T,l)=>{const a=n("v-img"),s=n("v-avatar"),g=n("v-card"),m=n("v-container");return h(),E("div",Ae,[oe(e(m,{class:"pb-1 rental rental__wrapper"},{default:t(()=>[e(g,{variant:"elevated",elevation:"4",class:"pa-2"},{default:t(()=>[e(a,{color:"surface-variant",height:"200",width:"100%",src:`${L(U)}/images/hotel_01.png`,cover:"",alt:"Parking Image"},{default:t(()=>[...l[1]||(l[1]=[i("h1",{class:"ml-6 mt-4 text-h5 font-weight-bold"},[$("住宿車輛"),i("br"),$("預約及臨櫃登記")],-1)])]),_:1},8,["src"]),i("div",Oe,[e(s,{image:`${L(U)}/images/profile.svg`,size:"30"},null,8,["image"]),i("span",Ne,C(_.value&&_.value.acc_name)+" 您好！ ",1)])]),_:1}),c.value?A("",!0):(h(),R(ie,{key:0,tabList:L(de),onSetActiveTab:j},null,8,["tabList"]))]),_:1},512),[[re,!y.value||!c.value]]),d.value.value==="counterCheckIn"?(h(),R(m,{key:0,id:"counterCheckIn",class:"rental rental__wrapper flex-grow-1 overflow-y-hidden"},{default:t(()=>[e(be,{activeTab:d.value,userID:_.value&&_.value.userId,onCloseForm:D},null,8,["activeTab","userID"])]),_:1})):A("",!0),d.value.value==="selfCheckIn"?(h(),R(m,{key:1,id:"selfCheckIn",class:"rental rental__wrapper flex-grow-1 overflow-y-hidden"},{default:t(()=>[e(Ve,{activeTab:d.value,userID:_.value&&_.value.userId,onCloseForm:D},null,8,["activeTab","userID"])]),_:1})):A("",!0),d.value.value==="search"?(h(),R(m,{key:2,id:"search",class:"rental rental__wrapper flex-grow-1 overflow-y-hidden"},{default:t(()=>[e(ze,{activeTab:d.value,onCloseForm:D},null,8,["activeTab"])]),_:1})):A("",!0),d.value.value==="logout"?(h(),R(m,{key:3,id:"logout",class:"rental rental__wrapper flex-grow-1 overflow-y-hidden"},{default:t(()=>[e(ce,{activeTab:d.value,onOnLogin:p},null,8,["activeTab"])]),_:1})):A("",!0),d.value.value==="changePassword"?(h(),R(m,{key:4,id:"changePassword",class:"rental rental__wrapper flex-grow-1 overflow-y-hidden"},{default:t(()=>[e(ve,{activeTab:d.value,userInfo:_.value,onOnClose:N},null,8,["activeTab","userInfo"])]),_:1})):A("",!0),e(X,{modelValue:b.value,"onUpdate:modelValue":l[0]||(l[0]=f=>b.value=f),message:B.value,messageTitle:V.value,isConfirmBtn:r.value,onPromptConfirm:S,onOnClose:M},null,8,["modelValue","message","messageTitle","isConfirmBtn"])])}}},We=fe(qe,[["__scopeId","data-v-df256f88"]]);export{We as default};
