import{h as d,y as U,ac as B,n as e,ad as a,a5 as s,ag as F,ah as j,a7 as q,v as n,x as N,u as $,V as D,a2 as z,Z as i}from"./vue-core-CsbKmrRr.js";import{C as E}from"./Captcha-DXpWYKET.js";import"./index-OTIWBI75.js";import"./vuetify-CHkSyw28.js";import"./date-DE_Uv9Lq.js";const I={id:"login",class:"pa-5 mx-auto h-100 rental rental__wrapper"},M={class:"ml-3 text-h6 font-weight-bold text-grey-darken-2"},P={style:{width:"120px",height:"40px"}},T={class:"d-flex ga-2 flex-wrap justify-end w-100"},O={__name:"LoginView",setup(Z){const w="https://peterhsj.github.io/RentalDemo",b=F(),p=j(),m=d({CounterLogin:{title:"住宿車輛登記",bgColor:"bg-grey-lighten-2",icon:"/images/bed.svg"},ShopLogin:{title:"商店消費折抵",bgColor:"bg-orange-lighten-5",icon:"/images/shoppingCart.svg"}}),r=d(""),g=d(),l=d({account:"",password:"",captcha:""}),v=d({accountRules:[o=>!!o||"帳號為必填"],passwordRules:[o=>!!o||"密碼為必填"],captchaRules:[o=>!!o||"驗證碼為必填",o=>o===h.value||"請輸入有效的驗證碼"]});U(()=>b.path,o=>{r.value=o.slice(1)},{immediate:!0});const h=d(""),C=o=>{h.value=o},y=async()=>{const{valid:o}=await g.value.validate();if(o){if(r.value==="CounterLogin"){p.push("/Counter");return}if(r.value==="ShopLogin"){p.push("/Shop");return}}},V=()=>{p.push("/")};return(o,t)=>{const k=s("v-img"),f=s("v-text-field"),u=s("v-col"),_=s("v-row"),x=s("v-btn"),R=s("v-container"),S=s("v-form"),L=s("v-card");return q(),B("div",I,[e(L,{variant:"outlined",class:"rounded-lg bordered border-md bg-white h-100"},{default:a(()=>[n("div",{class:N(["px-4 py-3 d-flex align-center",m.value[r.value].bgColor])},[n("span",null,[e(k,{height:"40",width:"45",src:`${$(w)}${m.value[r.value].icon}`,cover:"",alt:"icon"},null,8,["src"])]),n("span",M,D(m.value[r.value].title),1)],2),e(S,{ref_key:"loginFormRef",ref:g,class:"h-100",onSubmit:z(y,["prevent"])},{default:a(()=>[e(R,{class:"pb-2 d-flex flex-column justify-space-between",style:{height:"calc(100% - 64px)"}},{default:a(()=>[e(_,{dense:"",class:"flex-0-1"},{default:a(()=>[e(u,{cols:"12",md:"6"},{default:a(()=>[e(f,{modelValue:l.value.account,"onUpdate:modelValue":t[0]||(t[0]=c=>l.value.account=c),placeholder:"請輸入帳號",autocomplete:"off",variant:"outlined",density:"compact",color:"blue-darken-2",rules:v.value.accountRules,required:""},null,8,["modelValue","rules"])]),_:1}),e(u,{cols:"12",md:"6"},{default:a(()=>[e(f,{modelValue:l.value.password,"onUpdate:modelValue":t[1]||(t[1]=c=>l.value.password=c),placeholder:"請輸入密碼",autocomplete:"off",variant:"outlined",density:"compact",color:"blue-darken-2",rules:v.value.passwordRules,required:""},null,8,["modelValue","rules"])]),_:1}),e(u,{cols:"12",class:"py-0"},{default:a(()=>[...t[4]||(t[4]=[n("p",{class:"text-subtitle-1 font-weight-bold"},"驗證碼",-1)])]),_:1}),e(u,{cols:"12",md:"6"},{default:a(()=>[e(f,{modelValue:l.value.captcha,"onUpdate:modelValue":t[2]||(t[2]=c=>l.value.captcha=c),placeholder:"請輸入驗證碼",autocomplete:"off",variant:"outlined",density:"compact",color:"blue-darken-2",rules:v.value.captchaRules,onInput:t[3]||(t[3]=c=>l.value.captcha=l.value.captcha.toUpperCase()),required:""},{append:a(()=>[n("div",P,[e(E,{onSetCaptchaCode:C})])]),_:1},8,["modelValue","rules"])]),_:1}),e(u,{cols:"12"},{default:a(()=>[...t[5]||(t[5]=[n("p",{class:"text-subtitle-2 text-red-darken-1"},[i(" 注意："),n("br"),i(" 更換車號請重新操作，入場當日無法更換登記車號。 ")],-1)])]),_:1})]),_:1}),e(_,{"no-gutters":"",class:"flex-0-1"},{default:a(()=>[e(u,{cols:"12",class:"mt-4"},{default:a(()=>[n("div",T,[e(x,{type:"submit",color:"light-green-darken-2",variant:"flat",class:"my-2 px-8 w-100 w-sm-auto rounded-lg text-h6 font-weight-regular",height:"40"},{default:a(()=>[...t[6]||(t[6]=[i(" 登入 ",-1)])]),_:1}),e(x,{color:"blue-darken-3",variant:"flat",class:"my-2 px-8 w-100 w-sm-auto rounded-lg text-h6 font-weight-regular",height:"40",onClick:V},{default:a(()=>[...t[7]||(t[7]=[i(" 離開 ",-1)])]),_:1})])]),_:1})]),_:1})]),_:1})]),_:1},512)]),_:1})])}}};export{O as default};
