import{h as r,H as W,a5 as n,ac as S,a7 as f,n as e,ad as t,v as s,x as ae,u as R,V as b,a2 as Z,a6 as k,af as N,Z as y,F as G,ae as K,a0 as le,P as oe,Q as se,ah as ne}from"./vue-core-CsbKmrRr.js";import{_ as re,c as ue}from"./TabList-C060IOAN.js";import{f as J,_ as ie,C as ce}from"./ChangePassword-ByW9QcXg.js";import{_ as M}from"./PromptDialog-TYGxE2y4.js";import{i as de,e as me}from"./date-DE_Uv9Lq.js";import{_ as fe}from"./index-BzWwcZFU.js";import"./vuetify-CHkSyw28.js";const ve={id:"checkin",class:"h-100"},_e={class:"ml-3 text-h6 font-weight-bold text-grey-darken-2"},pe={class:"d-flex flex-wrap justify-end w-100"},ge={class:"d-flex justify-space-between w-100"},be={class:"mt-3 d-flex flex-wrap justify-end w-100"},Q={__name:"CheckinForm",props:{activeTab:{type:Object,default:()=>({})}},emits:["closeForm"],setup(A,{emit:I}){const m=A,i=I,h="https://peterhsj.github.io/RentalDemo",v=r(!1),p=r(""),C=r(""),V=r(!1),u=r({startDate:"",endDate:"",carNumber:"",phoneNumber:""}),$=r(null),D=r(),T=r({phoneRules:[a=>!!a||"手機號碼為必填",a=>/^\d{10}$/.test(a)||"請輸入有效的手機號碼"],carRules:[a=>!!a||"車號為必填"],startDateRule:[a=>!!a||"請選擇起始日期",a=>{if(!a||!u.value.endDate)return!0;const o=new Date(a),_=new Date(u.value.endDate);return!o||!_?!0:!me(o,_)||"起始日期不能晚於結束日期"}],endDateRule:[a=>!!a||"請選擇結束日期",a=>{if(!a||!u.value.startDate)return!0;const o=new Date(u.value.startDate),_=new Date(a);return!o||!_?!0:!de(_,o)||"結束日期不能早於起始日期"}]}),P=r([{id:"p01",phoneNumber:"",carNumber:"ABC-1234",startDate:"2025-10-01",endDate:"2025-10-01"},{id:"p02",phoneNumber:"",carNumber:"DEF-1234",startDate:"2025-10-01",endDate:"2025-10-01"},{id:"p01",phoneNumber:"0912345678",carNumber:"",startDate:"2025-10-01",endDate:"2025-10-01"},{id:"p02",phoneNumber:"0987654321",carNumber:"",startDate:"2025-10-01",endDate:"2025-10-01"}]),w=r([]),L=()=>{m.activeTab.value==="selfCheckIn"?w.value=P.value.filter(a=>a.phoneNumber!==""):m.activeTab.value==="counterCheckIn"&&(w.value=P.value.filter(a=>a.carNumber!==""))};W(()=>{L()});const F=async()=>{const{valid:a}=await D.value.validate();if(!a)return;const{carNumber:o,startDate:_,endDate:E}=u.value;v.value=!0,p.value="無法登記",C.value="本車號已登記，須先刪除原本登記日期後才能再次申請。",V.value=!1},x=a=>{$.value=a,v.value=!0,m.activeTab.value==="counterCheckIn"&&(p.value="刪除登記車號",C.value=`確認刪除 ${a.carNumber} 申請車號？`),m.activeTab.value==="selfCheckIn"&&(p.value="刪除登記手機號碼",C.value=`確認刪除 ${a.phoneNumber} 申請手機號碼？`),V.value=!0},l=()=>{const a=w.value.findIndex(o=>o.id===$.value.id);a!==-1&&w.value.splice(a,1)},B=()=>{i("closeForm")},U=()=>{v.value=!1,l()},j=()=>{v.value=!1};return(a,o)=>{const _=n("v-icon"),E=n("v-avatar"),q=n("v-text-field"),g=n("v-col"),z=n("v-date-input"),O=n("v-btn"),c=n("v-row"),X=n("v-form"),Y=n("v-list-item"),ee=n("v-list"),H=n("v-card"),te=n("v-container");return f(),S("div",ve,[e(H,{variant:"outlined",class:"rounded-lg bordered border-md bg-white h-100"},{default:t(()=>[s("div",{class:ae(["px-4 py-3 d-flex align-center rental__header",[m.activeTab.value==="counterCheckIn"?"bg-orange-lighten-5":"rental__bg--light-blue"]]),onClick:B},[e(_,{icon:"fa:fas fa-chevron-left",size:"20",color:"grey-darken-1",class:"mr-2"}),e(E,{image:`${R(h)}${m.activeTab.icon}`,size:"40"},null,8,["image"]),s("span",_e,b(m.activeTab.title),1)],2),e(te,{class:"pb-2 d-flex flex-column justify-space-between",style:{height:"calc(100% - 64px)"}},{default:t(()=>[e(X,{ref_key:"checkinFormRef",ref:D,onSubmit:Z(F,["prevent"])},{default:t(()=>[e(c,{dense:"",class:"flex-0-1"},{default:t(()=>[m.activeTab.value==="selfCheckIn"?(f(),k(g,{key:0,cols:"12",md:"4"},{default:t(()=>[e(q,{modelValue:u.value.phoneNumber,"onUpdate:modelValue":o[0]||(o[0]=d=>u.value.phoneNumber=d),placeholder:"請輸入登記手機號碼",autocomplete:"off",variant:"outlined",density:"compact",color:"blue-darken-2",rules:T.value.phoneRules,required:""},null,8,["modelValue","rules"])]),_:1})):N("",!0),m.activeTab.value==="counterCheckIn"?(f(),k(g,{key:1,cols:"12",md:"4"},{default:t(()=>[e(q,{modelValue:u.value.carNumber,"onUpdate:modelValue":o[1]||(o[1]=d=>u.value.carNumber=d),rules:T.value.carRules,placeholder:"請輸入車號",autocomplete:"off",variant:"outlined",density:"compact",color:"blue-darken-2","bg-color":"white",required:""},null,8,["modelValue","rules"])]),_:1})):N("",!0),e(g,{cols:"12",md:"4"},{default:t(()=>[e(z,{modelValue:u.value.startDate,"onUpdate:modelValue":o[2]||(o[2]=d=>u.value.startDate=d),rules:T.value.startDateRule,"display-format":R(J),"prepend-icon":"","append-inner-icon":"fa:far fa-calendar-alt",placeholder:"起：2025-10-01",variant:"outlined",density:"compact",color:"blue-darken-2","bg-color":"white",required:""},null,8,["modelValue","rules","display-format"])]),_:1}),e(g,{cols:"12",md:"4"},{default:t(()=>[e(z,{modelValue:u.value.endDate,"onUpdate:modelValue":o[3]||(o[3]=d=>u.value.endDate=d),rules:T.value.endDateRule,"display-format":R(J),"prepend-icon":"","append-inner-icon":"fa:far fa-calendar-alt",placeholder:"迄：2025-10-01",variant:"outlined",density:"compact",color:"blue-darken-2","bg-color":"white",required:""},null,8,["modelValue","rules","display-format"])]),_:1}),e(g,{cols:"12"},{default:t(()=>[s("div",pe,[e(O,{type:"submit",color:"light-green-darken-2",variant:"flat",class:"px-8 w-100 w-sm-auto rounded-lg text-h6 font-weight-regular",height:"40"},{default:t(()=>[...o[5]||(o[5]=[y(" 登記 ",-1)])]),_:1})])]),_:1})]),_:1})]),_:1},512),e(H,{variant:"outlined",class:"mt-5 pa-2 rounded-lg bordered border-md bg-white flex-grow-1 overflow-y-auto"},{default:t(()=>[e(ee,null,{default:t(()=>[(f(!0),S(G,null,K(w.value,d=>(f(),k(Y,{class:"py-2",key:d.id},{default:t(()=>[s("div",ge,[e(c,{"no-gutters":"",class:"align-center flex-grow-1"},{default:t(()=>[e(g,{cols:"12",md:"4",class:"text-h5 font-weight-bold text-grey-darken-1"},{default:t(()=>[y(b(m.activeTab.value==="counterCheckIn"?d.carNumber:d.phoneNumber),1)]),_:2},1024),e(g,{cols:"12",md:"4",class:"text-subtitle-1 text-blue-darken-3"},{default:t(()=>[y(b(d.startDate),1)]),_:2},1024),e(g,{cols:"12",md:"4",class:"text-subtitle-1 text-blue-darken-3"},{default:t(()=>[y(b(d.endDate),1)]),_:2},1024)]),_:2},1024),s("div",null,[e(O,{density:"comfortable",variant:"flat",icon:"fa:fas fa-times-circle",class:"text-red-darken-1",onClick:Pe=>x(d)},null,8,["onClick"])])])]),_:2},1024))),128))]),_:1})]),_:1}),e(c,{"no-gutters":"",class:"flex-0-1"},{default:t(()=>[e(g,{cols:"12"},{default:t(()=>[s("div",be,[e(O,{color:"blue-darken-3",variant:"flat",class:"my-2 px-8 w-100 w-sm-auto rounded-lg text-h6 font-weight-regular",height:"40",onClick:B},{default:t(()=>[...o[6]||(o[6]=[y(" 完成離開 ",-1)])]),_:1})])]),_:1})]),_:1})]),_:1})]),_:1}),e(M,{modelValue:v.value,"onUpdate:modelValue":o[4]||(o[4]=d=>v.value=d),message:C.value,messageTitle:p.value,isConfirmBtn:V.value,onPromptConfirm:U,onOnClose:j},null,8,["modelValue","message","messageTitle","isConfirmBtn"])])}}},he={id:"checkin",class:"h-100"},we={class:"ml-3 text-h6 font-weight-bold text-grey-darken-2"},xe={class:"d-flex flex-wrap justify-end w-100"},ke={class:"d-flex flex-column w-100"},ye={class:"ml-3 text-amber-darken-3"},Ce={class:"ml-3 text-amber-darken-3"},De={class:"ml-3 text-amber-darken-3"},Te={class:"ml-3 text-amber-darken-3"},Ne={class:"ml-3 text-amber-darken-3"},Ve={class:"ml-3 text-amber-darken-3"},$e={class:"mt-3 d-flex flex-wrap justify-end w-100"},Fe={__name:"SearchForm",props:{activeTab:{type:Object,default:()=>({})}},emits:["closeForm"],setup(A,{emit:I}){const m=A,i=I,h="https://peterhsj.github.io/RentalDemo",v=r(!1),p=r(""),C=r(""),V=r(!1),u=r({phoneNumber:"",carNumber:""}),$=r(),D=r({phoneRules:[x=>!x||/^\d{10}$/.test(x)||"請輸入有效的手機號碼"]}),T=r([{id:"p01",type:"counter",rvDate:"2025-10-01",carNumber:"ABC-1234",phoneNumber:"0912345678",startDate:"2025-10-09",endDate:"2025-10-10"}]),P=async()=>{const{valid:x}=await $.value.validate();if(!x)return;const{carNumber:l,startDate:B,endDate:U}=u.value},w=()=>{i("closeForm")},L=()=>{v.value=!1},F=()=>{v.value=!1};return(x,l)=>{const B=n("v-icon"),U=n("v-avatar"),j=n("v-text-field"),a=n("v-col"),o=n("v-btn"),_=n("v-row"),E=n("v-form"),q=n("v-list-item"),g=n("v-list"),z=n("v-card"),O=n("v-container");return f(),S("div",he,[e(z,{variant:"outlined",class:"rounded-lg bordered border-md bg-white h-100"},{default:t(()=>[s("div",{class:"px-4 py-3 d-flex align-center rental__bg--light-blue rental__header",onClick:w},[e(B,{icon:"fa:fas fa-chevron-left",size:"20",color:"grey-darken-1",class:"mr-2"}),e(U,{image:`${R(h)}${m.activeTab.icon}`,size:"40"},null,8,["image"]),s("span",we,b(m.activeTab.title),1)]),e(O,{class:"pb-2 d-flex flex-column justify-space-between",style:{height:"calc(100% - 64px)"}},{default:t(()=>[e(E,{ref_key:"searchFormRef",ref:$,onSubmit:Z(P,["prevent"])},{default:t(()=>[e(_,{dense:"",class:"flex-0-1"},{default:t(()=>[e(a,{cols:"12",md:"4"},{default:t(()=>[e(j,{modelValue:u.value.phoneNumber,"onUpdate:modelValue":l[0]||(l[0]=c=>u.value.phoneNumber=c),placeholder:"請輸入登記手機號碼",autocomplete:"off",variant:"outlined",density:"compact",color:"blue-darken-2",rules:D.value.phoneRules},null,8,["modelValue","rules"])]),_:1}),e(a,{cols:"12",md:"4"},{default:t(()=>[e(j,{modelValue:u.value.carNumber,"onUpdate:modelValue":l[1]||(l[1]=c=>u.value.carNumber=c),placeholder:"請輸入車號",autocomplete:"off",variant:"outlined",density:"compact",color:"blue-darken-2","bg-color":"white","hide-details":"auto"},null,8,["modelValue"])]),_:1}),e(a,{cols:"12"},{default:t(()=>[...l[3]||(l[3]=[s("p",{class:"text-subtitle-2 text-red-darken-1"}," 輸入其中之一即可。 ",-1)])]),_:1}),e(a,{cols:"12"},{default:t(()=>[s("div",xe,[e(o,{type:"submit",color:"light-green-darken-2",variant:"flat",class:"px-8 w-100 w-sm-auto rounded-lg text-h6 font-weight-regular",height:"40"},{default:t(()=>[...l[4]||(l[4]=[y(" 查詢 ",-1)])]),_:1})])]),_:1})]),_:1})]),_:1},512),e(z,{variant:"outlined",class:"mt-5 pa-2 rounded-lg bordered border-md bg-white flex-grow-1 overflow-y-auto"},{default:t(()=>[e(g,null,{default:t(()=>[(f(!0),S(G,null,K(T.value,c=>(f(),k(q,{class:"py-2",key:c.id},{default:t(()=>[s("div",ke,[e(_,{"no-gutters":"",class:"align-center"},{default:t(()=>[e(a,{cols:"12",md:"4",class:"rental__text--h4 font-weight-bold"},{default:t(()=>[l[5]||(l[5]=s("span",{class:"text-grey-darken-1"},"登記來源",-1)),s("span",ye,b(c.type==="counter"?"臨櫃":"自助"),1)]),_:2},1024),e(a,{cols:"12",md:"4",class:"rental__text--h4 font-weight-bold"},{default:t(()=>[l[6]||(l[6]=s("span",{class:"text-grey-darken-1"},"登記帳號",-1)),s("span",Ce,b(c.phoneNumber),1)]),_:2},1024),e(a,{cols:"12",md:"4",class:"rental__text--h4 font-weight-bold"},{default:t(()=>[l[7]||(l[7]=s("span",{class:"text-grey-darken-1"},"登記日期",-1)),s("span",De,b(c.rvDate),1)]),_:2},1024)]),_:2},1024),e(_,{"no-gutters":"",class:"align-center mt-3"},{default:t(()=>[e(a,{cols:"12",md:"4",class:"rental__text--h4 font-weight-bold"},{default:t(()=>[l[8]||(l[8]=s("span",{class:"text-grey-darken-1"},"車　　號",-1)),s("span",Te,b(c.carNumber),1)]),_:2},1024),e(a,{cols:"12",md:"4",class:"rental__text--h4 font-weight-bold"},{default:t(()=>[l[9]||(l[9]=s("span",{class:"text-grey-darken-1"},"起　　日",-1)),s("span",Ne,b(c.startDate),1)]),_:2},1024),e(a,{cols:"12",md:"4",class:"rental__text--h4 font-weight-bold"},{default:t(()=>[l[10]||(l[10]=s("span",{class:"text-grey-darken-1"},"迄　　日",-1)),s("span",Ve,b(c.endDate),1)]),_:2},1024)]),_:2},1024)])]),_:2},1024))),128))]),_:1})]),_:1}),e(_,{"no-gutters":"",class:"flex-0-1"},{default:t(()=>[e(a,{cols:"12"},{default:t(()=>[s("div",$e,[e(o,{color:"blue-darken-3",variant:"flat",class:"my-2 px-8 w-100 w-sm-auto rounded-lg text-h6 font-weight-regular",height:"40",onClick:w},{default:t(()=>[...l[11]||(l[11]=[y(" 回選單 ",-1)])]),_:1})])]),_:1})]),_:1})]),_:1})]),_:1}),e(M,{modelValue:v.value,"onUpdate:modelValue":l[2]||(l[2]=c=>v.value=c),message:C.value,messageTitle:p.value,isConfirmBtn:V.value,onPromptConfirm:L,onOnClose:F},null,8,["modelValue","message","messageTitle","isConfirmBtn"])])}}},Be={id:"parkingView",class:"d-flex flex-column bg-grey-lighten-4 h-100"},Re={class:"pt-2 d-flex align-center"},Ie={__name:"CounterView",setup(A){const I="https://peterhsj.github.io/RentalDemo",m=ne(),i=r({}),h=r(!1),v=r(!1),p=r(!1),C=r(""),V=r(""),u=r(!1),$=x=>{i.value=x,h.value=!0,console.log("tab",i)},D=()=>{i.value={},h.value=!1},T=()=>{i.value={},h.value=!1,m.push("/CounterLogin")},P=()=>{i.value={},h.value=!1},w=()=>{p.value=!1,isInfo.value=!0,infoStatus.value="success",initForm()},L=()=>{p.value=!1},F=()=>{v.value=window.innerWidth<=960};return W(()=>{F(),window.addEventListener("resize",F)}),le(()=>{window.removeEventListener("resize",F)}),(x,l)=>{const B=n("v-img"),U=n("v-avatar"),j=n("v-card"),a=n("v-container");return f(),S("div",Be,[oe(e(a,{class:"pb-1 rental rental__wrapper"},{default:t(()=>[e(j,{variant:"elevated",elevation:"4",class:"pa-2"},{default:t(()=>[e(B,{color:"surface-variant",height:"200",width:"100%",src:`${R(I)}/images/hotel_01.png`,cover:"",alt:"Parking Image"},{default:t(()=>[...l[1]||(l[1]=[s("h1",{class:"ml-6 mt-4 text-h5 font-weight-bold"},[y("住宿車輛"),s("br"),y("預約及臨櫃登記")],-1)])]),_:1},8,["src"]),s("div",Re,[e(U,{image:`${R(I)}/images/profile.svg`,size:"30"},null,8,["image"]),l[2]||(l[2]=s("span",{class:"ml-3 text-subtitle-1 font-weight-bold text-grey-darken-3"}," John Doe 您好！ ",-1))])]),_:1}),h.value?N("",!0):(f(),k(re,{key:0,tabList:R(ue),onSetActiveTab:$},null,8,["tabList"]))]),_:1},512),[[se,!v.value||!h.value]]),i.value.value==="counterCheckIn"?(f(),k(a,{key:0,id:"counterCheckIn",class:"rental rental__wrapper flex-grow-1 overflow-y-hidden"},{default:t(()=>[e(Q,{activeTab:i.value,onCloseForm:D},null,8,["activeTab"])]),_:1})):N("",!0),i.value.value==="selfCheckIn"?(f(),k(a,{key:1,id:"selfCheckIn",class:"rental rental__wrapper flex-grow-1 overflow-y-hidden"},{default:t(()=>[e(Q,{activeTab:i.value,onCloseForm:D},null,8,["activeTab"])]),_:1})):N("",!0),i.value.value==="search"?(f(),k(a,{key:2,id:"search",class:"rental rental__wrapper flex-grow-1 overflow-y-hidden"},{default:t(()=>[e(Fe,{activeTab:i.value,onCloseForm:D},null,8,["activeTab"])]),_:1})):N("",!0),i.value.value==="logout"?(f(),k(a,{key:3,id:"logout",class:"rental rental__wrapper flex-grow-1 overflow-y-hidden"},{default:t(()=>[e(ie,{activeTab:i.value,onOnLogin:T},null,8,["activeTab"])]),_:1})):N("",!0),i.value.value==="changePassword"?(f(),k(a,{key:4,id:"changePassword",class:"rental rental__wrapper flex-grow-1 overflow-y-hidden"},{default:t(()=>[e(ce,{activeTab:i.value,onOnClose:P},null,8,["activeTab"])]),_:1})):N("",!0),e(M,{modelValue:p.value,"onUpdate:modelValue":l[0]||(l[0]=o=>p.value=o),message:V.value,messageTitle:C.value,isConfirmBtn:u.value,onPromptConfirm:w,onOnClose:L},null,8,["modelValue","message","messageTitle","isConfirmBtn"])])}}},Ee=fe(Ie,[["__scopeId","data-v-f28c150b"]]);export{Ee as default};
