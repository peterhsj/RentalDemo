import{h as s,H as te,a5 as i,ac as G,a7 as v,n as e,ad as a,v as o,u as p,V as j,a6 as g,af as _,F as de,ae as ie,x as ce,Z as I,a2 as me,a0 as ve,P as fe,Q as pe,ah as ge}from"./vue-core-CsbKmrRr.js";import{_ as _e,b as be}from"./TabList-C060IOAN.js";import{a as oe}from"./index-BFZgDbVB.js";import{f as Z,_ as we,C as he}from"./ChangePassword-BVL-1V1a.js";import{_ as ae}from"./PromptDialog-TYGxE2y4.js";import{_ as ne}from"./index-v91uvhOd.js";import{i as xe,e as ye}from"./date-DE_Uv9Lq.js";import"./vuetify-CHkSyw28.js";const Ce={id:"checkin",class:"h-100"},ke={class:"ml-3 text-h6 font-weight-bold text-grey-darken-2"},Ve={class:"mx-4"},qe={class:"my-2"},Te={class:"py-1 text-h6 font-weight-regular"},$e={class:"text-h6 font-weight-regular"},Re={class:"ma-6 d-flex flex-column align-center justify-center"},Se={class:"mt-3 d-flex flex-wrap justify-end w-100"},De={__name:"QrCode",props:{activeTab:{type:Object,default:()=>({})},vendorId:{type:Number,required:!0}},emits:["closeForm"],setup(X,{emit:M}){const y=X,w=M,m="https://peterhsj.github.io/RentalDemo",f=s(!1),h=s(!1),C=s(""),Q=s(""),D=s(!1),c=s(""),L=s([]),V=s(),l=s({banquet_name:"",banquet_start:"",startHour:null,startMinute:null,startSecond:"00",banquet_end:"",endHour:null,endMinute:null,endSecond:"00",count:null}),U=s({nameRules:[u=>!!u||"請輸入宴會名稱"],countRule:[u=>!!u||"請選擇折抵時間"],startDateRule:[u=>!!u||"請選擇起始日期",u=>{if(!u||!l.value.banquet_end)return!0;const t=new Date(u),b=new Date(l.value.banquet_end);return!t||!b?!0:!ye(t,b)||"起始日期不能晚於結束日期"}],endDateRule:[u=>!!u||"請選擇結束日期",u=>{if(!u||!l.value.banquet_start)return!0;const t=new Date(l.value.banquet_start),b=new Date(u);return!t||!b?!0:!xe(b,t)||"結束日期不能早於起始日期"}]}),z=s([{id:"p01",value:1,title:"1 小時"},{id:"p02",value:2,title:"2 小時"},{id:"p01",value:3,title:"3 小時"}]),F=Array.from({length:24},(u,t)=>String(t).padStart(2,"0")),x=Array.from({length:60},(u,t)=>String(t).padStart(2,"0")),r=Array.from({length:60},(u,t)=>String(t).padStart(2,"0")),B=s({}),q=async()=>{const u={vendorId:y.vendorId};f.value=!0;const t="/member/grand_hotel/select_qr?bQz0fX8f=4ApR34x2wb2CVTNUfsq3";try{const b=await oe.post(t,u),{returnCode:N,message:$,data:d}=b;N===0?(console.log("data",d),L.value=d[0]):(C.value="訊息通知",Q.value=`${$}`,D.value=!1,h.value=!0),c.value="showList"}catch(b){console.log({err:b})}finally{f.value=!1}};te(async()=>{await q()});const P=u=>{B.value=u,c.value="showQRCode",console.log("currentItem",B.value)},O=()=>{c.value="addQrCode"},T=async()=>{const{valid:u}=await V.value.validate();if(!u)return;const{banquet_name:t,banquet_start:b,startHour:N,startMinute:$,startSecond:d,banquet_end:R,endHour:K,endMinute:J,endSecond:S,count:Y}=l.value,A=`${Z(b)} ${N}:${$}:${d}`,W=`${Z(R)} ${K}:${J}:${S}`;console.log("送出表單",l.value,A,W);const n={vendorId:y.vendorId,banquet_name:t,banquet_start:A,banquet_end:W,count:Y};console.log("payload",n),f.value=!0;const le="/member/grand_hotel/create_qr?bQz0fX8f=4ApR34x2wb2CVTNUfsq3";try{const ee=await oe.post(le,n),{returnCode:se,message:re,data:ue}=ee;se===0?(console.log("data",ue),await q(),c.value="showQRCode"):(C.value="訊息通知",Q.value=`${re}`,D.value=!1,h.value=!0)}catch(ee){console.log({err:ee})}finally{f.value=!1}},k=()=>{w("closeForm")},E=()=>{h.value=!1},H=()=>{h.value=!1};return(u,t)=>{const b=i("v-icon"),N=i("v-img"),$=i("v-card"),d=i("v-col"),R=i("v-row"),K=i("v-text-field"),J=i("v-date-input"),S=i("v-select"),Y=i("v-form"),A=i("v-btn"),W=i("v-container");return v(),G("div",Ce,[e($,{variant:"outlined",class:"rounded-lg bordered border-md bg-white h-100"},{default:a(()=>[o("div",{class:"px-4 py-3 d-flex align-center rental__header rental__bg--light-orange",onClick:k},[e(b,{icon:"fa:fas fa-chevron-left",size:"20",color:"grey-darken-1",class:"mr-2"}),o("span",null,[e(N,{height:"30",width:"35",src:`${p(m)}${y.activeTab.icon}`,cover:"",alt:"icon"},null,8,["src"])]),o("span",ke,j(c.value==="showList"||c.value==="showQRCode"?y.activeTab.title:"產出 QRCode"),1)]),e(W,{class:"pb-2 d-flex flex-column justify-space-between",style:{height:"calc(100% - 64px)"}},{default:a(()=>[c.value==="showList"?(v(),g($,{key:0,variant:"flat",class:"mt-5 pa-2 rounded-lg flex-grow-1 overflow-y-auto"},{default:a(()=>[L.value.length>0?(v(),g(R,{key:0},{default:a(()=>[(v(!0),G(de,null,ie(L.value,n=>(v(),g(d,{cols:"12",sm:"6",md:"3",key:n.id},{default:a(()=>[e($,{variant:"flat",class:ce(["pa-2 rounded-lg bg-light-green-darken-1 text-white mb-4 d-flex flex-row align-center",{"opacity-50":n.disabled}]),link:"",disabled:n.disabled,onClick:le=>P(n)},{default:a(()=>[o("div",Ve,[e(N,{height:"30",width:"35",cover:"",alt:"icon",src:`${p(m)}/images/qrcode.svg`},null,8,["src"])]),o("div",qe,[o("p",Te,j(n.startDate),1),o("p",$e,j(n.title),1)])]),_:2},1032,["class","disabled","onClick"])]),_:2},1024))),128))]),_:1})):_("",!0)]),_:1})):_("",!0),c.value==="showQRCode"?(v(),g($,{key:1,variant:"flat",class:"mt-5 pa-2 rounded-lg flex-grow-1 overflow-y-auto"},{default:a(()=>[o("div",Re,[o("span",null,[e(N,{height:"200",width:"200",color:"black",cover:"",alt:"icon",src:`${p(m)}/images/qrcode.svg`},null,8,["src"])]),t[12]||(t[12]=o("div",{class:"my-6 d-flex flex-column align-center justify-center"},[o("p",{class:"py-6 text-h5 font-weight-bold"}," 王林府喜宴 "),o("p",{class:"text-h5 font-weight-bold"}," 有效日期 "),o("p",{class:"text-h5 font-weight-regular"}," 2025-10-01 23:30 "),o("p",{class:"py-6 text-h5 font-weight-bold"}," 折抵小時數 3 ")],-1))])]),_:1})):_("",!0),c.value==="addQrCode"?(v(),g($,{key:2,variant:"flat",class:"mt-5 pa-2 rounded-lg flex-grow-1 overflow-y-auto"},{default:a(()=>[e(Y,{ref_key:"qrCodeFormRef",ref:V},{default:a(()=>[e(R,{dense:"",class:"flex-0-1"},{default:a(()=>[e(d,{cols:"12"},{default:a(()=>[...t[13]||(t[13]=[o("p",{class:"mt-1 mb-2 text-h6 text-grey-darken-1"}," 宴會名稱： ",-1)])]),_:1}),e(d,{cols:"12",md:"4"},{default:a(()=>[e(K,{modelValue:l.value.banquet_name,"onUpdate:modelValue":t[0]||(t[0]=n=>l.value.banquet_name=n),placeholder:"請輸入宴會名稱",autocomplete:"off",variant:"outlined",density:"compact",color:"blue-darken-2",rules:U.value.nameRules,required:""},null,8,["modelValue","rules"])]),_:1}),e(d,{cols:"12"},{default:a(()=>[...t[14]||(t[14]=[o("p",{class:"mt-1 mb-2 text-h6 text-grey-darken-1"}," 有效日期及時間： ",-1)])]),_:1}),e(d,{cols:"12",md:"4",class:"d-flex flex-no-wrap align-center"},{default:a(()=>[e(J,{modelValue:l.value.banquet_start,"onUpdate:modelValue":t[1]||(t[1]=n=>l.value.banquet_start=n),rules:U.value.startDateRule,"display-format":p(Z),"prepend-icon":"","append-inner-icon":"fa:far fa-calendar-alt",placeholder:"起：2025-10-01",variant:"outlined",density:"compact",color:"blue-darken-2","bg-color":"white",required:""},null,8,["modelValue","rules","display-format"])]),_:1}),e(d,{cols:"12",md:"4",class:"d-flex flex-no-wrap align-center"},{default:a(()=>[e(R,{dense:""},{default:a(()=>[e(d,{cols:"auto",class:"flex-grow-1"},{default:a(()=>[e(S,{modelValue:l.value.startHour,"onUpdate:modelValue":t[2]||(t[2]=n=>l.value.startHour=n),items:p(F),rules:[!!l.value.startHour||"請選擇時"],placeholder:"時",variant:"outlined",density:"compact",color:"blue-darken-2","bg-color":"white",required:""},null,8,["modelValue","items","rules"])]),_:1}),e(d,{cols:"auto"},{default:a(()=>[...t[15]||(t[15]=[o("span",{class:"text-h5"},":",-1)])]),_:1}),e(d,{cols:"auto",class:"flex-grow-1"},{default:a(()=>[e(S,{modelValue:l.value.startMinute,"onUpdate:modelValue":t[3]||(t[3]=n=>l.value.startMinute=n),items:p(x),rules:[!!l.value.startMinute||"請選擇分"],placeholder:"分",variant:"outlined",density:"compact",color:"blue-darken-2","bg-color":"white",required:""},null,8,["modelValue","items","rules"])]),_:1}),e(d,{cols:"auto"},{default:a(()=>[...t[16]||(t[16]=[o("span",{class:"text-h5"},":",-1)])]),_:1}),e(d,{cols:"auto",class:"flex-grow-1"},{default:a(()=>[e(S,{modelValue:l.value.startSecond,"onUpdate:modelValue":t[4]||(t[4]=n=>l.value.startSecond=n),items:p(r),rules:[!!l.value.startSecond||"請選擇秒"],placeholder:"秒",variant:"outlined",density:"compact",color:"blue-darken-2","bg-color":"white",required:""},null,8,["modelValue","items","rules"])]),_:1})]),_:1})]),_:1})]),_:1}),e(R,{dense:"",class:"flex-0-1"},{default:a(()=>[e(d,{cols:"12",md:"4"},{default:a(()=>[e(J,{modelValue:l.value.banquet_end,"onUpdate:modelValue":t[5]||(t[5]=n=>l.value.banquet_end=n),rules:U.value.endDateRule,"display-format":p(Z),"prepend-icon":"","append-inner-icon":"fa:far fa-calendar-alt",placeholder:"迄：2025-10-01",variant:"outlined",density:"compact",color:"blue-darken-2","bg-color":"white",required:""},null,8,["modelValue","rules","display-format"])]),_:1}),e(d,{cols:"12",md:"4",class:"d-flex flex-no-wrap align-center"},{default:a(()=>[e(R,{dense:""},{default:a(()=>[e(d,{cols:"auto",class:"flex-grow-1"},{default:a(()=>[e(S,{modelValue:l.value.endHour,"onUpdate:modelValue":t[6]||(t[6]=n=>l.value.endHour=n),items:p(F),rules:[!!l.value.endHour||"請選擇時"],placeholder:"時",variant:"outlined",density:"compact",color:"blue-darken-2","bg-color":"white",required:""},null,8,["modelValue","items","rules"])]),_:1}),e(d,{cols:"auto"},{default:a(()=>[...t[17]||(t[17]=[o("span",{class:"text-h5"},":",-1)])]),_:1}),e(d,{cols:"auto",class:"flex-grow-1"},{default:a(()=>[e(S,{modelValue:l.value.endMinute,"onUpdate:modelValue":t[7]||(t[7]=n=>l.value.endMinute=n),items:p(x),rules:[!!l.value.endMinute||"請選擇分"],placeholder:"分",variant:"outlined",density:"compact",color:"blue-darken-2","bg-color":"white",required:""},null,8,["modelValue","items","rules"])]),_:1}),e(d,{cols:"auto"},{default:a(()=>[...t[18]||(t[18]=[o("span",{class:"text-h5"},":",-1)])]),_:1}),e(d,{cols:"auto",class:"flex-grow-1"},{default:a(()=>[e(S,{modelValue:l.value.endSecond,"onUpdate:modelValue":t[8]||(t[8]=n=>l.value.endSecond=n),items:p(r),rules:[!!l.value.endSecond||"請選擇秒"],placeholder:"秒",variant:"outlined",density:"compact",color:"blue-darken-2","bg-color":"white",required:""},null,8,["modelValue","items","rules"])]),_:1})]),_:1})]),_:1})]),_:1}),e(R,{dense:"",class:"flex-0-1"},{default:a(()=>[e(d,{cols:"12",md:"4"},{default:a(()=>[e(S,{modelValue:l.value.count,"onUpdate:modelValue":t[9]||(t[9]=n=>l.value.count=n),items:z.value,rules:U.value.countRule,placeholder:"請選擇時間","item-title":"title","item-value":"value",variant:"outlined",density:"compact",color:"blue-darken-2","bg-color":"white",required:""},null,8,["modelValue","items","rules"])]),_:1})]),_:1})]),_:1},512)]),_:1})):_("",!0),e(R,{"no-gutters":"",class:"flex-0-1"},{default:a(()=>[e(d,{cols:"12"},{default:a(()=>[o("div",Se,[c.value==="showList"?(v(),g(A,{key:0,color:"blue-darken-3",variant:"flat",class:"my-2 px-8 w-100 w-sm-auto rounded-lg text-h6 font-weight-regular",height:"40",onClick:O},{default:a(()=>[...t[19]||(t[19]=[I(" 新增折抵 QRCode ",-1)])]),_:1})):_("",!0),c.value==="showQRCode"?(v(),g(A,{key:1,color:"blue-darken-3",variant:"flat",class:"my-2 px-8 w-100 w-sm-auto rounded-lg text-h6 font-weight-regular",height:"40",onClick:t[10]||(t[10]=n=>c.value="showList")},{default:a(()=>[...t[20]||(t[20]=[I(" 回選單 ",-1)])]),_:1})):_("",!0),c.value==="addQrCode"?(v(),g(A,{key:2,color:"blue-darken-3",variant:"flat",class:"my-2 px-8 w-100 w-sm-auto rounded-lg text-h6 font-weight-regular",height:"40",onClick:me(T,["prevent"])},{default:a(()=>[...t[21]||(t[21]=[I(" 產出 QRCode ",-1)])]),_:1})):_("",!0)])]),_:1})]),_:1})]),_:1})]),_:1}),e(ae,{modelValue:h.value,"onUpdate:modelValue":t[11]||(t[11]=n=>h.value=n),message:Q.value,messageTitle:C.value,isConfirmBtn:D.value,onPromptConfirm:E,onOnClose:H},null,8,["modelValue","message","messageTitle","isConfirmBtn"])])}}},Ue=ne(De,[["__scopeId","data-v-1084ac1e"]]),Be={id:"search",class:"h-100"},Ie={class:"ml-3 text-h6 font-weight-bold text-grey-darken-2"},Qe={__name:"SearchForm",props:{activeTab:{type:Object,default:()=>({})}},emits:["closeForm"],setup(X,{emit:M}){const y=X,w=M,m="https://peterhsj.github.io/RentalDemo",f=s(!1),h=s(""),C=s(""),Q=s(!1),D=s(),c=s({carNumber:""}),L=s({carRules:[x=>!!x||"車號為必填"]});s(!1);const V=s([]);te(()=>{});const l=async()=>{console.log("送出表單",c.value.carNumber);const{valid:x}=await D.value.validate();if(!x)return;const{carNumber:r}=c.value;V.value=[{id:"p01",phoneNumber:"",carNumber:"ABC-1234",startDate:"2025-10-01 12:30:29",endDate:"2025-10-01"}]},U=()=>{w("closeForm")},z=()=>{f.value=!1,delParkingConfirm()},F=()=>{f.value=!1};return(x,r)=>{const B=i("v-icon"),q=i("v-avatar"),P=i("v-btn"),O=i("v-text-field"),T=i("v-col"),k=i("v-row"),E=i("v-form"),H=i("v-card"),u=i("v-container");return v(),G("div",Be,[e(H,{variant:"outlined",class:"rounded-lg bordered border-md bg-white h-100"},{default:a(()=>[o("div",{class:"px-4 py-3 d-flex align-center rental__header bg-orange-lighten-5",onClick:U},[e(B,{icon:"fa:fas fa-chevron-left",size:"20",color:"grey-darken-1",class:"mr-2"}),e(q,{image:`${p(m)}${y.activeTab.icon}`,size:"40"},null,8,["image"]),o("span",Ie,j(y.activeTab.title),1)]),e(u,{class:"pb-2 d-flex flex-column",style:{height:"calc(100% - 64px)"}},{default:a(()=>[e(E,{ref_key:"formRef",ref:D},{default:a(()=>[e(k,{dense:""},{default:a(()=>[e(T,{cols:"12"},{default:a(()=>[e(O,{modelValue:c.value.carNumber,"onUpdate:modelValue":r[0]||(r[0]=t=>c.value.carNumber=t),rules:L.value.carRules,placeholder:"請輸入車號",autocomplete:"off",variant:"outlined",density:"compact",color:"blue-darken-2",class:"pr-0","bg-color":"white",required:""},{"append-inner":a(()=>[e(P,{type:"button",color:"blue-darken-3",variant:"flat",class:"mr-n3 px-3",height:"40",onClick:l},{default:a(()=>[...r[2]||(r[2]=[I(" 查詢 ",-1)])]),_:1})]),_:1},8,["modelValue","rules"])]),_:1})]),_:1})]),_:1},512),V.value.length>0?(v(),g(H,{key:0,variant:"flat",class:"pa-2 rounded-lg bg-blue-darken-3 text-center"},{default:a(()=>[...r[3]||(r[3]=[o("p",null,"入場資訊",-1),o("p",{class:"py-2 text-h6 font-weight-bold"},"AXN-1234",-1),o("p",null,"2025-10-01 12:30:29",-1)])]),_:1})):_("",!0),V.value.length>0?(v(),g(H,{key:1,variant:"outlined",class:"mt-5 pa-2 d-flex flex-column align-center rounded-lg bordered border-md bg-white"},{default:a(()=>[r[8]||(r[8]=o("p",{class:"my-4 text-h6"},"應繳金額",-1)),r[9]||(r[9]=o("p",{class:"my-1"},[o("span",{class:"mr-1"},"NT$"),o("span",{class:"text-h3 font-weight-bold"},"150")],-1)),e(H,{variant:"flat",class:"my-2 pa-3 rounded-lg bg-grey-lighten-4 w-100"},{default:a(()=>[e(k,{dense:""},{default:a(()=>[e(T,{cols:"8",class:"text-grey-darken-1"},{default:a(()=>[...r[4]||(r[4]=[I(" 花園咖啡廳 ",-1)])]),_:1}),e(T,{cols:"4",class:"text-grey-darken-1"},{default:a(()=>[...r[5]||(r[5]=[I(" 2 hr ",-1)])]),_:1}),e(T,{cols:"8",class:"text-grey-darken-1"},{default:a(()=>[...r[6]||(r[6]=[I(" 民歌西餐廳 ",-1)])]),_:1}),e(T,{cols:"4",class:"text-grey-darken-1"},{default:a(()=>[...r[7]||(r[7]=[I(" 2 hr ",-1)])]),_:1})]),_:1})]),_:1})]),_:1})):_("",!0)]),_:1})]),_:1}),e(ae,{modelValue:f.value,"onUpdate:modelValue":r[1]||(r[1]=t=>f.value=t),message:C.value,messageTitle:h.value,isConfirmBtn:Q.value,onPromptConfirm:z,onOnClose:F},null,8,["modelValue","message","messageTitle","isConfirmBtn"])])}}},Le={id:"banquet",class:"d-flex flex-column bg-grey-lighten-4 h-100"},Ne={class:"pt-2 d-flex align-center"},Me={class:"ml-3 text-subtitle-1 font-weight-bold text-grey-darken-3"},Fe={__name:"BanquetView",setup(X){const M="https://peterhsj.github.io/RentalDemo",y=ge(),w=s(null),m=s({}),f=s(!1),h=s(!1),C=s(!1),Q=s(""),D=s(""),c=s(!1),L=B=>{m.value=B,f.value=!0,console.log("tab",m)},V=()=>{m.value={},f.value=!1},l=()=>{m.value={},f.value=!1,y.push("/ShopLogin")},U=()=>{m.value={},f.value=!1},z=()=>{C.value=!1},F=()=>{C.value=!1},x=()=>{h.value=window.innerWidth<=960},r=()=>{if(localStorage.getItem("memberInfo"))w.value=JSON.parse(localStorage.getItem("memberInfo")),console.log("memberInfo",w.value);else{y.push("/CounterLogin");return}};return te(()=>{r(),x(),window.addEventListener("resize",x)}),ve(()=>{window.removeEventListener("resize",x)}),(B,q)=>{const P=i("v-img"),O=i("v-avatar"),T=i("v-card"),k=i("v-container");return v(),G("div",Le,[fe(e(k,{class:"pb-1 rental rental__wrapper"},{default:a(()=>[e(T,{variant:"elevated",elevation:"4",class:"pa-2"},{default:a(()=>[e(P,{color:"surface-variant",height:"200",width:"100%",src:`${p(M)}/images/hotel_01.png`,cover:"",alt:"Banquet Image"},{default:a(()=>[...q[1]||(q[1]=[o("h1",{class:"ml-6 mt-4 text-h5 font-weight-bold"},"宴會廳自助折抵",-1)])]),_:1},8,["src"]),o("div",Ne,[e(O,{image:`${p(M)}/images/profile.svg`,size:"30"},null,8,["image"]),o("span",Me,j(w.value&&w.value.vendor_name)+" "+j(w.value&&w.value.acc_name)+" 您好！ ",1)])]),_:1}),f.value?_("",!0):(v(),g(_e,{key:0,tabList:p(be),onSetActiveTab:L},null,8,["tabList"]))]),_:1},512),[[pe,!h.value||!f.value]]),m.value.value==="qrCode"?(v(),g(k,{key:0,id:"qrCode",class:"rental rental__wrapper flex-grow-1 overflow-y-hidden"},{default:a(()=>[e(Ue,{activeTab:m.value,vendorId:w.value&&w.value.vendorId,onCloseForm:V},null,8,["activeTab","vendorId"])]),_:1})):_("",!0),m.value.value==="search"?(v(),g(k,{key:1,id:"search",class:"rental rental__wrapper flex-grow-1 overflow-y-hidden"},{default:a(()=>[e(Qe,{activeTab:m.value,onCloseForm:V},null,8,["activeTab"])]),_:1})):_("",!0),m.value.value==="logout"?(v(),g(k,{key:2,id:"logout",class:"rental rental__wrapper flex-grow-1 overflow-y-hidden"},{default:a(()=>[e(we,{activeTab:m.value,onOnLogin:l},null,8,["activeTab"])]),_:1})):_("",!0),m.value.value==="changePassword"?(v(),g(k,{key:3,id:"changePassword",class:"rental rental__wrapper flex-grow-1 overflow-y-hidden"},{default:a(()=>[e(he,{activeTab:m.value,onOnClose:U},null,8,["activeTab"])]),_:1})):_("",!0),e(ae,{modelValue:C.value,"onUpdate:modelValue":q[0]||(q[0]=E=>C.value=E),message:D.value,messageTitle:Q.value,isConfirmBtn:c.value,onPromptConfirm:z,onOnClose:F},null,8,["modelValue","message","messageTitle","isConfirmBtn"])])}}},Je=ne(Fe,[["__scopeId","data-v-408a04bb"]]);export{Je as default};
