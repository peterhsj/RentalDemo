import{h as i,r as W,y as L,a5 as n,ac as P,a7 as v,n as e,ad as t,v as u,u as D,V as E,a2 as q,Z as F,a6 as k,af as C,H,a0 as X,P as Q,Q as Z}from"./vue-core-CsbKmrRr.js";import{_ as G,p as J}from"./TabList-C060IOAN.js";import{C as K}from"./Captcha-lFC1mnsC.js";import{_ as Y}from"./PromptDialog-TYGxE2y4.js";import{_ as ee}from"./index-Bd8C6Z0I.js";import"./vuetify-CHkSyw28.js";import"./date-DE_Uv9Lq.js";const te={id:"search",class:"h-100"},ae={class:"ml-3 text-h6 font-weight-bold text-grey-darken-2"},oe={style:{width:"120px",height:"40px"}},ne={class:"d-flex ga-2 flex-wrap justify-end w-100"},M={__name:"SearchForm",props:{activeTab:{type:Object,default:()=>({})},formData:{type:Object,default:()=>({})}},emits:["update:formData","closeForm","sendForm"],setup(h,{expose:x,emit:s}){const o=h,_=s,f="https://peterhsj.github.io/RentalDemo",d=i(),a=W(o.formData),p=i({phoneRules:[l=>!!l||"手機號碼為必填",l=>/^\d{10}$/.test(l)||"請輸入有效的手機號碼"],carRules:[l=>!!l||"車號為必填"],captchaRules:[l=>!!l||"驗證碼為必填",l=>l===m.value||"請輸入有效的驗證碼"]});L(()=>o.formData,l=>{Object.assign(a,l)},{deep:!0}),L(()=>a,l=>{_("update:formData",l)},{deep:!0});const m=i(""),g=l=>{m.value=l},y=async()=>{const{valid:l}=await d.value.validate();l&&_("sendForm")},b=()=>{_("closeForm")};return x({initForm:()=>{d.value.reset()}}),(l,r)=>{const N=n("v-icon"),$=n("v-avatar"),R=n("v-text-field"),w=n("v-col"),I=n("v-row"),j=n("v-btn"),A=n("v-container"),V=n("v-form"),U=n("v-card");return v(),P("div",te,[e(U,{variant:"outlined",class:"rounded-lg bordered border-md bg-white h-100"},{default:t(()=>[u("div",{class:"px-4 py-3 d-flex align-center bg-orange-lighten-5 rental__header",onClick:b},[e(N,{icon:"fa:fas fa-chevron-left",size:"20",color:"grey-darken-1",class:"mr-2"}),e($,{image:`${D(f)}${o.activeTab.icon}`,size:"40"},null,8,["image"]),u("span",ae,E(o.activeTab.title),1)]),e(V,{ref_key:"parkingFormRef",ref:d,class:"h-100",onSubmit:q(y,["prevent"])},{default:t(()=>[e(A,{class:"pb-2 d-flex flex-column justify-space-between",style:{height:"calc(100% - 64px)"}},{default:t(()=>[e(I,{dense:"",class:"flex-0-1"},{default:t(()=>[e(w,{cols:"12",md:"6"},{default:t(()=>[e(R,{modelValue:a.phoneNumber,"onUpdate:modelValue":r[0]||(r[0]=c=>a.phoneNumber=c),placeholder:o.activeTab.value==="parking"?"請輸入手機號碼":"請輸入登記手機號碼",autocomplete:"off",variant:"outlined",density:"compact",color:"blue-darken-2",rules:p.value.phoneRules,required:""},null,8,["modelValue","placeholder","rules"])]),_:1}),e(w,{cols:"12",md:"6"},{default:t(()=>[e(R,{modelValue:a.carNumber,"onUpdate:modelValue":r[1]||(r[1]=c=>a.carNumber=c),placeholder:o.activeTab.value==="parking"?"請輸入車號":"請輸入已登記車號",autocomplete:"off",variant:"outlined",density:"compact",color:"blue-darken-2",rules:p.value.carRules,required:""},null,8,["modelValue","placeholder","rules"])]),_:1}),e(w,{cols:"12",class:"py-0"},{default:t(()=>[...r[4]||(r[4]=[u("p",{class:"text-subtitle-1 font-weight-bold"},"驗證碼",-1)])]),_:1}),e(w,{cols:"12",md:"6"},{default:t(()=>[e(R,{modelValue:a.captcha,"onUpdate:modelValue":r[2]||(r[2]=c=>a.captcha=c),placeholder:"請輸入驗證碼",autocomplete:"off",variant:"outlined",density:"compact",color:"blue-darken-2",rules:p.value.captchaRules,onInput:r[3]||(r[3]=c=>a.captcha=a.captcha.toUpperCase()),required:""},{append:t(()=>[u("div",oe,[e(K,{onSetCaptchaCode:g})])]),_:1},8,["modelValue","rules"])]),_:1}),e(w,{cols:"12"},{default:t(()=>[...r[5]||(r[5]=[u("p",{class:"text-subtitle-2 text-red-darken-1"},[F(" 注意："),u("br"),F(" 更換車號請重新操作，入場當日無法更換登記車號。 ")],-1)])]),_:1})]),_:1}),e(I,{"no-gutters":"",class:"flex-0-1"},{default:t(()=>[e(w,{cols:"12",class:"mt-4"},{default:t(()=>[u("div",ne,[e(j,{type:"submit",color:"light-green-darken-2",variant:"flat",class:"my-2 px-8 w-100 w-sm-auto rounded-lg text-h6 font-weight-regular",height:"40"},{default:t(()=>[F(E(o.activeTab.value==="parking"?"登記":"查詢"),1)]),_:1}),e(j,{color:"blue-darken-3",variant:"flat",class:"my-2 px-8 w-100 w-sm-auto rounded-lg text-h6 font-weight-regular",height:"40",onClick:b},{default:t(()=>[...r[6]||(r[6]=[F(" 離開 ",-1)])]),_:1})])]),_:1})]),_:1})]),_:1})]),_:1},512)]),_:1})])}}},le={id:"parkingInfo",class:"h-100"},se={class:"ml-3 text-h6 font-weight-bold text-grey-darken-2"},re={__name:"ParkingInfo",props:{activeTab:{type:Object,default:()=>({})}},emits:["closeForm"],setup(h,{emit:x}){const s="https://peterhsj.github.io/RentalDemo",o=h,_=x,f=()=>{_("closeForm")};return(d,a)=>{const p=n("v-icon"),m=n("v-avatar"),g=n("v-col"),y=n("v-row"),b=n("v-container"),T=n("v-card");return v(),P("div",le,[e(T,{variant:"outlined",class:"rounded-lg bordered border-md bg-white h-100"},{default:t(()=>[u("div",{class:"px-4 py-3 d-flex align-center bg-orange-lighten-5 rental__header",onClick:f},[e(p,{icon:"fa:fas fa-chevron-left",size:"20",color:"grey-darken-1",class:"mr-2"}),e(m,{image:`${D(s)}${o.activeTab.icon}`,size:"40"},null,8,["image"]),u("span",se,E(o.activeTab.title),1)]),e(b,{class:"pb-2 d-flex flex-column justify-space-between",style:{height:"calc(100% - 64px)"}},{default:t(()=>[e(y,{dense:"",class:"flex-0-1"},{default:t(()=>[e(g,{cols:"12",md:"6"},{default:t(()=>[...a[0]||(a[0]=[F(" ParkingInfo ",-1)])]),_:1})]),_:1})]),_:1})]),_:1})])}}},ce={class:"d-flex flex-column align-center justify-center"},ie={class:"my-4"},ue=["innerHTML"],de={class:"d-flex ga-2 flex-wrap justify-center w-100"},me={__name:"InfoView",props:{info:{type:String,default:""},infoStatus:{type:String,default:"success"}},emits:["infoClose","reWrite"],setup(h,{emit:x}){const s="https://peterhsj.github.io/RentalDemo",o=x,_=()=>{o("infoClose")},f=()=>{o("reWrite")};return(d,a)=>{const p=n("v-img"),m=n("v-btn"),g=n("v-col"),y=n("v-row"),b=n("v-container"),T=n("v-card");return v(),k(b,{class:"rental rental__wrapper flex-grow-1"},{default:t(()=>[e(T,{variant:"outlined",class:"mb-5 pt-5 d-flex flex-column justify-space-between rounded-lg bordered border-md bg-white h-100"},{default:t(()=>[u("div",ce,[u("span",ie,[e(p,{height:"100%",width:"120px",src:h.infoStatus==="success"?`${D(s)}/images/check.svg`:`${D(s)}/images/warning.svg`,cover:"",alt:"icon image"},null,8,["src"])]),u("div",{class:"d-flex flex-column align-center justify-center pa-6",innerHTML:h.info},null,8,ue)]),e(b,{class:"py-2"},{default:t(()=>[e(y,{"no-gutters":""},{default:t(()=>[e(g,{cols:"12"},{default:t(()=>[u("div",de,[h.infoStatus!=="error"?(v(),k(m,{key:0,color:"blue-darken-3",variant:"flat",class:"my-2 px-8 w-100 w-sm-auto rounded-lg text-h6 font-weight-regular",height:"40",onClick:_},{default:t(()=>[...a[0]||(a[0]=[F(" 離開 ",-1)])]),_:1})):C("",!0),h.infoStatus==="error"?(v(),k(m,{key:1,color:"orange-darken-3",variant:"flat",class:"my-2 px-8 w-100 w-sm-auto rounded-lg text-h6 font-weight-regular",height:"40",onClick:f},{default:t(()=>[...a[1]||(a[1]=[F(" 重新輸入 ",-1)])]),_:1})):C("",!0)])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})}}},fe={BASE_URL:"/RentalDemo/",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_API_BASE_URL:"https://peterhsj.github.io/RentalDemo",VITE_API_DOMAIN:"https://peterhsj.github.io/RentalDemo",VITE_BASE_URL:"/"},pe={id:"parkingView",class:"d-flex flex-column bg-grey-lighten-4 h-100"},ve={__name:"ParkingView",setup(h){const x="https://peterhsj.github.io/RentalDemo";console.log("BaseUrl:",x),console.log("所有環境變數:",fe);const s=i({}),o=i(!1),_=i(!1),f=i(),d=i({phoneNumber:"",carNumber:"",captcha:""}),a=i(!1),p=i(""),m=i(""),g=i(!1),y=i(""),b=i(""),T=i(!1),l=U=>{s.value=U,o.value=!0},r=async()=>{console.log("提交表單",d.value),o.value=!1,a.value=!0,m.value="success",p.value=`<p class="text-h4 text-grey-darken-1 font-weight-bold my-2">
      已完成登記
    </p>
    <p class="rental__text--h45 text-grey-darken-1 font-weight-bold mt-3">
      車號
    </p>
    <p class="text-h5 text-amber-darken-3 font-weight-bold my-0">
      AAX-6895
    </p>
    <p class="rental__text--h45 text-grey-darken-1 font-weight-bold mt-4">
      停放日期
    </p>
    <p class="text-h5 text-amber-darken-3 font-weight-bold my-0">
      2025-10-09 ~ 2025-10-10
    </p>`,f.value.initForm()},N=()=>{s.value={},a.value=!0,m.value="success",p.value=`<p class="text-h4 text-grey-darken-1 font-weight-bold my-2">
      已完成登記
    </p>
    <p class="rental__text--h45 text-grey-darken-1 font-weight-bold mt-3">
      車號
    </p>
    <p class="text-h5 text-amber-darken-3 font-weight-bold my-0">
      AAX-6895
    </p>
    <p class="rental__text--h45 text-grey-darken-1 font-weight-bold mt-4">
      停放日期
    </p>
    <p class="text-h5 text-amber-darken-3 font-weight-bold my-0">
      2025-10-09 ~ 2025-10-10
    </p>`},$=()=>{s.value={},f.value.initForm(),o.value=!1},R=()=>{s.value={},o.value=!1},w=()=>{a.value=!1,o.value=!0},I=()=>{a.value=!1,o.value=!1,s.value={},d.value={phoneNumber:"",carNumber:"",captcha:""}},j=()=>{g.value=!1,a.value=!0,o.value=!1,m.value="success",f.value.initForm()},A=()=>{g.value=!1},V=()=>{_.value=window.innerWidth<=960};return H(()=>{V(),window.addEventListener("resize",V)}),X(()=>{window.removeEventListener("resize",V)}),(U,c)=>{const O=n("v-img"),z=n("v-card"),B=n("v-container");return v(),P("div",pe,[Q(e(B,{class:"pb-1 rental rental__wrapper"},{default:t(()=>[e(z,{variant:"elevated",elevation:"4",class:"pa-2"},{default:t(()=>[e(O,{color:"surface-variant",height:"200",width:"100%",src:`${D(x)}/images/hotel_01.png`,cover:"",alt:"Parking Image"},{default:t(()=>[...c[3]||(c[3]=[u("h1",{class:"ml-6 mt-4 text-h5 font-weight-bold"},"住宿車輛登記",-1)])]),_:1},8,["src"])]),_:1}),!o.value&&!a.value?(v(),k(G,{key:0,tabList:D(J),onSetActiveTab:l},null,8,["tabList"])):C("",!0)]),_:1},512),[[Z,(!_.value||!o.value)&&!a.value]]),o.value&&s.value.value==="parking"?(v(),k(B,{key:0,id:"parking",class:"rental rental__wrapper flex-grow-1 overflow-y-hidden"},{default:t(()=>[e(M,{ref_key:"searchFormRef",ref:f,formData:d.value,"onUpdate:formData":c[0]||(c[0]=S=>d.value=S),activeTab:s.value,onCloseForm:$,onSendForm:r},null,8,["formData","activeTab"])]),_:1})):C("",!0),o.value&&s.value.value==="search"?(v(),k(B,{key:1,id:"search",class:"rental rental__wrapper flex-grow-1 overflow-y-hidden"},{default:t(()=>[e(M,{ref_key:"searchFormRef",ref:f,formData:d.value,"onUpdate:formData":c[1]||(c[1]=S=>d.value=S),activeTab:s.value,onCloseForm:$,onSendForm:N},null,8,["formData","activeTab"])]),_:1})):C("",!0),o.value&&s.value.value==="parkingInfo"?(v(),k(B,{key:2,id:"parkingInfo",class:"rental rental__wrapper flex-grow-1 overflow-y-hidden"},{default:t(()=>[e(re,{activeTab:s.value,onCloseForm:R},null,8,["activeTab"])]),_:1})):C("",!0),a.value?(v(),k(me,{key:3,infoStatus:m.value,info:p.value,onInfoClose:I,onReWrite:w},null,8,["infoStatus","info"])):C("",!0),e(Y,{modelValue:g.value,"onUpdate:modelValue":c[2]||(c[2]=S=>g.value=S),message:b.value,messageTitle:y.value,isConfirmBtn:T.value,onPromptConfirm:j,onOnClose:A},null,8,["modelValue","message","messageTitle","isConfirmBtn"])])}}},ye=ee(ve,[["__scopeId","data-v-7ff9f811"]]);export{ye as default};
