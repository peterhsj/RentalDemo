import{h as o,H as J,a5 as n,ac as q,a7 as m,n as t,ad as a,v as s,u as S,V as x,a6 as w,af as B,Z as g,a2 as G,F as K,ae as Y,a0 as ee,P as te,Q as ae,ah as le}from"./vue-core-CsbKmrRr.js";import{_ as oe,s as se}from"./TabList-C060IOAN.js";import{a as H}from"./index-BFZgDbVB.js";import{_ as Z}from"./PromptDialog-TYGxE2y4.js";import{f as Q,_ as ne,C as re}from"./ChangePassword-BVL-1V1a.js";import{i as ie,e as ue}from"./date-DE_Uv9Lq.js";import{_ as de}from"./index-v91uvhOd.js";import"./vuetify-CHkSyw28.js";const ce={id:"parkingDeduction",class:"h-100"},me={class:"ml-3 text-subtitle-1 font-weight-bold text-grey-darken-3"},fe={class:"d-flex justify-center my-8"},ve={key:0},pe={key:1,class:"text-h3"},ge={class:"ma-4 d-flex align-center justify-space-around w-100"},_e={class:"mt-3 d-flex flex-wrap justify-center w-100"},be={__name:"ParkingDeduction",props:{activeTab:{type:Object,default:()=>({})},memberInfo:{type:Object,default:()=>({})}},emits:["closeForm"],setup(X,{emit:z}){const V=X,h=z,u="https://peterhsj.github.io/RentalDemo",i=o(!1),$=o(""),y=o(""),N=o(!1),j=o(),k=o({license_plate:""}),b=o({carRules:[r=>!!r||"車號為必填",r=>/^[A-Z0-9]+-[A-Z0-9]+$/.test(r)||"請輸入有效的車號 ( 需包含 - 符號 )"]}),C=o(!1),D=o(!1),P=o({}),U=async()=>{const r={id:V.memberInfo.vendorId};console.log("payload",r),C.value=!0;const e="/member/grand_hotel/get_store?bQz0fX8f=4ApR34x2wb2CVTNUfsq3";try{const f=await H.post(e,r),{returnCode:T,message:p,data:F}=f;T===0?(console.log("data",F),P.value=F[0]):($.value="訊息通知",y.value=`${p}`,N.value=!1,i.value=!0)}catch(f){console.log({err:f})}finally{C.value=!1}};J(async()=>{await U()});const M=o([]),O=async()=>{const{valid:r}=await j.value.validate();if(!r)return;const{license_plate:e}=k.value,f={license_plate:e};console.log("payload",f),C.value=!0;const T="/member/grand_hotel/car_in_park_sel?bQz0fX8f=4ApR34x2wb2CVTNUfsq3";try{const p=await H.post(T,f),{returnCode:F,message:I,data:A}=p;F===0?console.log("data",A):($.value="訊息通知",y.value=`${I}`,N.value=!1,i.value=!0)}catch(p){console.log({err:p})}finally{C.value=!1}},d=r=>{console.log("選擇折抵時數",r)},l=()=>{console.log("選擇折抵時數")},c=()=>{h("closeForm")},v=()=>{i.value=!1,delParkingConfirm()},R=()=>{i.value=!1};return(r,e)=>{const f=n("v-avatar"),T=n("v-icon"),p=n("v-btn"),F=n("v-text-field"),I=n("v-col"),A=n("v-row"),_=n("v-form"),E=n("v-card"),W=n("v-container");return m(),q("div",ce,[t(E,{variant:"outlined",class:"rounded-lg bordered border-md bg-white h-100"},{default:a(()=>[s("div",{class:"px-4 py-3 d-flex align-center rental__header bg-orange-lighten-5",onClick:c},[t(f,{image:`${S(u)}/images/profile.svg`,size:"30"},null,8,["image"]),s("span",me,x(V.memberInfo.vendor_name)+" [ "+x(V.memberInfo.acc_name)+" ] ",1)]),t(W,{class:"pb-2 d-flex flex-column",style:{height:"calc(100% - 64px)"}},{default:a(()=>[s("div",fe,[t(f,{color:"blue-darken-3",size:"170"},{default:a(()=>[P.value.remainPoints==="-1"?(m(),q("span",ve,[t(T,{icon:"fa:fas fa-infinity",size:"80",class:""})])):(m(),q("span",pe,x(P.value.remainPoints),1))]),_:1})]),t(_,{ref_key:"formRef",ref:j},{default:a(()=>[t(A,{dense:""},{default:a(()=>[t(I,{cols:"12"},{default:a(()=>[t(F,{modelValue:k.value.license_plate,"onUpdate:modelValue":e[0]||(e[0]=L=>k.value.license_plate=L),rules:b.value.carRules,placeholder:"請輸入車號",autocomplete:"off",variant:"outlined",density:"compact",color:"blue-darken-2",class:"pr-0","bg-color":"white",onInput:e[1]||(e[1]=L=>k.value.license_plate=k.value.license_plate.toUpperCase()),required:""},{"append-inner":a(()=>[t(p,{type:"button",color:"blue-darken-3",variant:"flat",class:"mr-n3 px-3",height:"40",onClick:O},{default:a(()=>[...e[6]||(e[6]=[g(" 查詢 ",-1)])]),_:1})]),_:1},8,["modelValue","rules"])]),_:1})]),_:1})]),_:1},512),M.value.length>0?(m(),w(E,{key:0,variant:"flat",class:"pa-2 rounded-lg bg-blue-darken-3 text-center"},{default:a(()=>[...e[7]||(e[7]=[s("p",null,"入場資訊",-1),s("p",{class:"py-2 text-h6 font-weight-bold"},"AXN-1234",-1),s("p",null,"2025-10-01 12:30:29",-1)])]),_:1})):B("",!0),M.value.length>0?(m(),w(E,{key:1,variant:"outlined",class:"mt-5 pa-2 d-flex flex-column align-center rounded-lg bordered border-md bg-white"},{default:a(()=>[e[17]||(e[17]=s("p",{class:"my-4 text-h6"},"應繳金額",-1)),e[18]||(e[18]=s("p",{class:"my-1"},[s("span",{class:"mr-1"},"NT$"),s("span",{class:"text-h3 font-weight-bold"},"150")],-1)),e[19]||(e[19]=s("p",{class:"my-4 text-h6"},"折抵時數 / 當次折抵",-1)),s("div",ge,[t(p,{type:"button",color:"blue-darken-3",variant:"flat",class:"ma-2 px-4 text-none rounded-pill",height:"40",disabled:!D.value,onClick:e[2]||(e[2]=L=>d(1))},{default:a(()=>[...e[8]||(e[8]=[g(" 1 hr ",-1)])]),_:1},8,["disabled"]),t(p,{type:"button",color:"blue-darken-3",variant:"flat",class:"ma-2 px-4 text-none rounded-pill",height:"40",disabled:!D.value,onClick:e[3]||(e[3]=L=>d(2))},{default:a(()=>[...e[9]||(e[9]=[g(" 2 hr ",-1)])]),_:1},8,["disabled"]),t(p,{type:"button",color:"blue-darken-3",variant:"flat",class:"ma-2 px-4 text-none rounded-pill",height:"40",disabled:!D.value,onClick:e[4]||(e[4]=L=>d(3))},{default:a(()=>[...e[10]||(e[10]=[g(" 3 hr ",-1)])]),_:1},8,["disabled"])]),s("div",_e,[D.value?(m(),w(p,{key:0,color:"red-darken-1",variant:"flat",class:"my-2 px-8 w-100 w-sm-auto rounded-lg text-h6 font-weight-regular",height:"40",onClick:l},{default:a(()=>[...e[11]||(e[11]=[g(" 折抵 ",-1)])]),_:1})):(m(),w(p,{key:1,color:"blue-darken-3",variant:"flat",class:"my-2 px-8 w-100 w-sm-auto rounded-lg text-h6 font-weight-regular",height:"40",onClick:c},{default:a(()=>[...e[12]||(e[12]=[g(" 回上一頁 ",-1)])]),_:1}))]),t(E,{variant:"flat",class:"my-2 pa-3 rounded-lg bg-grey-lighten-4 w-100"},{default:a(()=>[t(A,{dense:""},{default:a(()=>[t(I,{cols:"8",class:"text-grey-darken-1"},{default:a(()=>[...e[13]||(e[13]=[g(" 花園咖啡廳 ",-1)])]),_:1}),t(I,{cols:"4",class:"text-grey-darken-1"},{default:a(()=>[...e[14]||(e[14]=[g(" 2 hr ",-1)])]),_:1}),t(I,{cols:"8",class:"text-grey-darken-1"},{default:a(()=>[...e[15]||(e[15]=[g(" 民歌西餐廳 ",-1)])]),_:1}),t(I,{cols:"4",class:"text-grey-darken-1"},{default:a(()=>[...e[16]||(e[16]=[g(" 2 hr ",-1)])]),_:1})]),_:1})]),_:1})]),_:1})):B("",!0)]),_:1})]),_:1}),t(Z,{modelValue:i.value,"onUpdate:modelValue":e[5]||(e[5]=L=>i.value=L),message:y.value,messageTitle:$.value,isConfirmBtn:N.value,onPromptConfirm:v,onOnClose:R},null,8,["modelValue","message","messageTitle","isConfirmBtn"])])}}},he={id:"checkin",class:"h-100"},xe={class:"ml-3 text-subtitle-1 font-weight-bold text-grey-darken-3"},we={class:"d-flex justify-end w-100"},ye={class:"w-25 w-sm-auto text-center"},ke={class:"mt-3 ga-2 d-flex justify-md-end flex-nowrap"},Ce={class:"d-flex justify-space-between w-100"},De={class:"pl-4 pt-2 mt-2 mr-1 rounded-te-xl bg-blue-darken-3 text-subtitle-1",style:{height:"40px"}},Ve={class:"d-flex flex-column flex-md-row flex-lg-row justify-start",style:{"line-height":"1.4"}},$e={class:"text-body-2 text-no-wrap w-100 w-md-50"},Te={class:"text-body-2 text-no-wrap w-100 w-md-50"},Ie={__name:"SearchForm",props:{activeTab:{type:Object,default:()=>({})},memberInfo:{type:Object,default:()=>({})}},emits:["closeForm"],setup(X,{emit:z}){const V=X,h=z,u="https://peterhsj.github.io/RentalDemo",i=o(!1),$=o(""),y=o(""),N=o(!1),j=o(!1),k=o(),b=o({start_time:"",end_time:""}),C=o({startDateRule:[d=>!!d||"請選擇起始日期",d=>{if(!d||!b.value.end_time)return!0;const l=new Date(d),c=new Date(b.value.end_time);return!l||!c?!0:!ue(l,c)||"起始日期不能晚於結束日期"}],endDateRule:[d=>!!d||"請選擇結束日期",d=>{if(!d||!b.value.start_time)return!0;const l=new Date(b.value.start_time),c=new Date(d);return!l||!c?!0:!ie(c,l)||"結束日期不能早於起始日期"}]});o([{id:"p01",carNumber:"AXN-1234",account:"Frank01",startDate:"2025-10-01",shop:"松鶴餐廳",hour:"1"},{id:"p02",carNumber:"HBO-1234",account:"Frank02",startDate:"2025-10-01",shop:"花園咖啡廳",hour:"1"},{id:"p01",carNumber:"MOMO-123",account:"Peter01",startDate:"2025-10-01",shop:"松鶴餐廳",hour:"2"},{id:"p02",carNumber:"USB-1234",account:"Peter02",startDate:"2025-10-01",shop:"花園咖啡廳",hour:"2"}]);const D=o([]);o([{id:"p01",type:"counter",rvDate:"2025-10-01",carNumber:"ABC-1234",phoneNumber:"0912345678",startDate:"2025-10-09",endDate:"2025-10-10"}]);const P=async()=>{const{valid:d}=await k.value.validate();if(!d)return;const{start_time:l,end_time:c}=b.value;console.log("送出表單",l,c);const v={start_time:Q(l),end_time:Q(c)};console.log("payload",v),j.value=!0;const R="/member/grand_hotel/select_store?bQz0fX8f=4ApR34x2wb2CVTNUfsq3";try{const r=await H.post(R,v),{returnCode:e,message:f,data:T}=r;e===0?console.log("data",T):($.value="訊息通知",y.value=`${f}`,N.value=!1,i.value=!0)}catch(r){console.log({err:r})}finally{j.value=!1}},U=()=>{h("closeForm")},M=()=>{i.value=!1},O=()=>{i.value=!1};return(d,l)=>{const c=n("v-avatar"),v=n("v-col"),R=n("v-date-input"),r=n("v-btn"),e=n("v-img"),f=n("v-row"),T=n("v-form"),p=n("v-container"),F=n("v-list-item"),I=n("v-list"),A=n("v-card");return m(),q("div",he,[t(A,{variant:"outlined",class:"rounded-lg bordered border-md bg-white h-100"},{default:a(()=>[s("div",{class:"px-4 py-3 d-flex align-center rental__header bg-orange-lighten-5",onClick:U},[t(c,{image:`${S(u)}/images/profile.svg`,size:"30"},null,8,["image"]),s("span",xe,x(V.memberInfo.vendor_name)+" [ "+x(V.memberInfo.acc_name)+" ] ",1)]),t(p,{class:"pb-2 d-flex flex-column justify-space-between",style:{height:"calc(100% - 64px)"}},{default:a(()=>[t(T,{ref_key:"searchFormRef",ref:k},{default:a(()=>[t(f,{dense:"",class:"flex-0-1"},{default:a(()=>[t(v,{cols:"12"},{default:a(()=>[...l[3]||(l[3]=[s("p",{class:"mt-1 mb-2 text-h6 text-blue-darken-3 text-center text-md-left"}," 折抵記錄查詢 ",-1)])]),_:1}),t(v,{cols:"12",md:"4"},{default:a(()=>[t(R,{modelValue:b.value.start_time,"onUpdate:modelValue":l[0]||(l[0]=_=>b.value.start_time=_),rules:C.value.startDateRule,"display-format":S(Q),"prepend-icon":"","append-inner-icon":"fa:far fa-calendar-alt",placeholder:"起：2025-10-01",variant:"outlined",density:"compact",color:"blue-darken-2","bg-color":"white",required:""},null,8,["modelValue","rules","display-format"])]),_:1}),t(v,{cols:"12",md:"4"},{default:a(()=>[t(R,{modelValue:b.value.end_time,"onUpdate:modelValue":l[1]||(l[1]=_=>b.value.end_time=_),rules:C.value.endDateRule,"display-format":S(Q),"prepend-icon":"","append-inner-icon":"fa:far fa-calendar-alt",placeholder:"迄：2025-10-01",variant:"outlined",density:"compact",color:"blue-darken-2","bg-color":"white",required:""},null,8,["modelValue","rules","display-format"])]),_:1}),t(v,{cols:"12"},{default:a(()=>[s("div",we,[t(r,{color:"blue-darken-2",variant:"flat",class:"px-8 w-75 w-sm-auto rounded-lg text-h6 font-weight-regular",height:"40",onClick:G(P,["prevent"])},{default:a(()=>[...l[4]||(l[4]=[g(" 查詢 ",-1)])]),_:1}),s("div",ye,[t(r,{color:"blue-darken-2",variant:"text",class:"px-2",height:"40"},{default:a(()=>[t(e,{height:"30",width:"35",src:`${S(u)}/images/ktorrent.svg`,cover:"",alt:"icon"},null,8,["src"])]),_:1})])])]),_:1})]),_:1})]),_:1},512),D.value.length>0?(m(),w(p,{key:0,class:"px-0 py-1"},{default:a(()=>[t(f,{"no-gutters":""},{default:a(()=>[t(v,{cols:"12"},{default:a(()=>[s("div",ke,[t(r,{color:"grey-lighten-1",variant:"flat",class:"my-2 px-8 text-h6 font-weight-regular text-white flex-1-1 flex-md-0-0",height:"40",onClick:U},{default:a(()=>[...l[5]||(l[5]=[g(" 全部 ",-1)])]),_:1}),t(r,{color:"grey-lighten-1",variant:"flat",class:"my-2 px-8 text-h6 font-weight-regular text-white flex-1-1 flex-md-0-0",height:"40",onClick:U},{default:a(()=>[...l[6]||(l[6]=[g(" 折抵 ",-1)])]),_:1}),t(r,{color:"grey-lighten-1",variant:"flat",class:"my-2 px-8 text-h6 font-weight-regular text-white flex-1-1 flex-md-0-0",height:"40",onClick:U},{default:a(()=>[...l[7]||(l[7]=[g(" 儲值 ",-1)])]),_:1})])]),_:1})]),_:1})]),_:1})):B("",!0),D.value.length>0?(m(),w(A,{key:1,variant:"flat",class:"bg-white flex-grow-1 overflow-y-auto"},{default:a(()=>[t(I,null,{default:a(()=>[(m(!0),q(K,null,Y(D.value,_=>(m(),w(F,{class:"pa-0 border",key:_.id},{default:a(()=>[s("div",Ce,[t(f,{"no-gutters":"",class:"align-center flex-grow-1"},{default:a(()=>[t(v,{cols:"4",md:"3"},{default:a(()=>[s("div",De,x(_.carNumber),1)]),_:2},1024),t(v,{cols:"2",md:"4",class:"pl-2 text-no-wrap"},{default:a(()=>[g(" -"+x(_.hour)+" 小時 ",1)]),_:2},1024),t(v,{cols:"5",md:"5",class:"pl-2 text-subtitle-1 text-grey-darken-2"},{default:a(()=>[s("div",Ve,[s("div",$e,x(_.startDate),1),s("div",Te,x(_.shop)+" "+x(_.account),1)])]),_:2},1024)]),_:2},1024)])]),_:2},1024))),128))]),_:1})]),_:1})):B("",!0)]),_:1})]),_:1}),t(Z,{modelValue:i.value,"onUpdate:modelValue":l[2]||(l[2]=_=>i.value=_),message:y.value,messageTitle:$.value,isConfirmBtn:N.value,onPromptConfirm:M,onOnClose:O},null,8,["modelValue","message","messageTitle","isConfirmBtn"])])}}},Be={id:"shopView",class:"d-flex flex-column bg-grey-lighten-4 h-100"},Ne={class:"pt-2 d-flex align-center"},Ue={class:"ml-3 text-subtitle-1 font-weight-bold text-grey-darken-3"},Re={__name:"ShopView",setup(X){const z="https://peterhsj.github.io/RentalDemo",V=le(),h=o(null),u=o({}),i=o(!1),$=o(!1),y=o(!1),N=o(""),j=o(""),k=o(!1),b=l=>{u.value=l,i.value=!0,console.log("tab",u)},C=()=>{u.value={},i.value=!1},D=()=>{u.value={},i.value=!1,V.push("/ShopLogin")},P=()=>{u.value={},i.value=!1},U=()=>{y.value=!1},M=()=>{y.value=!1},O=()=>{$.value=window.innerWidth<=960},d=()=>{if(localStorage.getItem("memberInfo"))h.value=JSON.parse(localStorage.getItem("memberInfo")),console.log("memberInfo",h.value);else{V.push("/CounterLogin");return}};return J(()=>{d(),O(),window.addEventListener("resize",O)}),ee(()=>{window.removeEventListener("resize",O)}),(l,c)=>{const v=n("v-img"),R=n("v-avatar"),r=n("v-card"),e=n("v-container");return m(),q("div",Be,[te(t(e,{class:"pb-1 rental rental__wrapper"},{default:a(()=>[t(r,{variant:"elevated",elevation:"4",class:"pa-2"},{default:a(()=>[t(v,{color:"surface-variant",height:"200",width:"100%",src:`${S(z)}/images/hotel_01.png`,cover:"",alt:"Shop Image"},{default:a(()=>[...c[1]||(c[1]=[s("h1",{class:"ml-6 mt-4 text-h5 font-weight-bold"},"商店消費停車折抵",-1)])]),_:1},8,["src"]),s("div",Ne,[t(R,{image:`${S(z)}/images/profile.svg`,size:"30"},null,8,["image"]),s("span",Ue,x(h.value&&h.value.vendor_name)+" "+x(h.value&&h.value.acc_name)+" 您好！ ",1)])]),_:1}),i.value?B("",!0):(m(),w(oe,{key:0,tabList:S(se),onSetActiveTab:b},null,8,["tabList"]))]),_:1},512),[[ae,!$.value||!i.value]]),u.value.value==="parkingDeduction"?(m(),w(e,{key:0,id:"parkingDeduction",class:"rental rental__wrapper flex-grow-1 overflow-y-hidden"},{default:a(()=>[t(be,{activeTab:u.value,memberInfo:h.value,onCloseForm:C},null,8,["activeTab","memberInfo"])]),_:1})):B("",!0),u.value.value==="search"?(m(),w(e,{key:1,id:"search",class:"rental rental__wrapper flex-grow-1 overflow-y-hidden"},{default:a(()=>[t(Ie,{activeTab:u.value,memberInfo:h.value,onCloseForm:C},null,8,["activeTab","memberInfo"])]),_:1})):B("",!0),u.value.value==="logout"?(m(),w(e,{key:2,id:"logout",class:"rental rental__wrapper flex-grow-1 overflow-y-hidden"},{default:a(()=>[t(ne,{activeTab:u.value,onOnLogin:D},null,8,["activeTab"])]),_:1})):B("",!0),u.value.value==="changePassword"?(m(),w(e,{key:3,id:"changePassword",class:"rental rental__wrapper flex-grow-1 overflow-y-hidden"},{default:a(()=>[t(re,{activeTab:u.value,onOnClose:P},null,8,["activeTab"])]),_:1})):B("",!0),t(Z,{modelValue:y.value,"onUpdate:modelValue":c[0]||(c[0]=f=>y.value=f),message:j.value,messageTitle:N.value,isConfirmBtn:k.value,onPromptConfirm:U,onOnClose:M},null,8,["modelValue","message","messageTitle","isConfirmBtn"])])}}},Me=de(Re,[["__scopeId","data-v-603e8509"]]);export{Me as default};
