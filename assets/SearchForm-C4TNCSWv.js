import{h as r,a5 as s,ac as B,a7 as f,n as t,ad as a,v as n,u as h,a6 as w,af as N,a2 as E,Z as m,F as H,ae as J,V as p}from"./vue-core-BOLQPpeJ.js";import{f as F}from"./ChangePassword-DCCiX10h.js";import{_ as X}from"./PromptDialog-u5wAjMe6.js";import{i as Z,e as G}from"./date-DE_Uv9Lq.js";const I={id:"checkin",class:"h-100"},K={class:"d-flex justify-end w-100"},Q={class:"w-25 w-sm-auto text-center"},W={class:"mt-3 ga-2 d-flex justify-md-end flex-nowrap"},Y={class:"d-flex justify-space-between w-100"},ee={class:"pl-4 pt-2 mt-2 mr-1 rounded-te-xl bg-blue-darken-3 text-subtitle-1",style:{height:"40px"}},te={class:"d-flex flex-column flex-md-row flex-lg-row justify-start",style:{"line-height":"1.4"}},ae={class:"text-body-2 text-no-wrap w-100 w-md-50"},le={class:"text-body-2 text-no-wrap w-100 w-md-50"},de={__name:"SearchForm",props:{activeTab:{type:Object,default:()=>({})}},emits:["closeForm"],setup(oe,{emit:R}){const j=R,y="https://peterhsj.github.io/RentalDemo",v=r(!1),O=r(""),T=r(""),U=r(!1),b=r(),i=r({startDateRule:"",endDate:""}),D=r({startDateRule:[l=>!!l||"請選擇起始日期",l=>{if(!l||!i.value.endDate)return!0;const e=new Date(l),d=new Date(i.value.endDate);return!e||!d?!0:!G(e,d)||"起始日期不能晚於結束日期"}],endDateRule:[l=>!!l||"請選擇結束日期",l=>{if(!l||!i.value.startDate)return!0;const e=new Date(i.value.startDate),d=new Date(l);return!e||!d?!0:!Z(d,e)||"結束日期不能早於起始日期"}]}),S=r([{id:"p01",carNumber:"AXN-1234",account:"Frank01",startDate:"2025-10-01",shop:"松鶴餐廳",hour:"1"},{id:"p02",carNumber:"HBO-1234",account:"Frank02",startDate:"2025-10-01",shop:"花園咖啡廳",hour:"1"},{id:"p01",carNumber:"MOMO-123",account:"Peter01",startDate:"2025-10-01",shop:"松鶴餐廳",hour:"2"},{id:"p02",carNumber:"USB-1234",account:"Peter02",startDate:"2025-10-01",shop:"花園咖啡廳",hour:"2"}]),_=r([]);r([{id:"p01",type:"counter",rvDate:"2025-10-01",carNumber:"ABC-1234",phoneNumber:"0912345678",startDate:"2025-10-09",endDate:"2025-10-10"}]);const A=async()=>{const{valid:l}=await b.value.validate();if(!l)return;const{startDate:e,endDate:d}=i.value;console.log("送出表單",e,d),_.value=S.value},g=()=>{j("closeForm")},L=()=>{v.value=!1},M=()=>{v.value=!1};return(l,e)=>{const d=s("v-avatar"),u=s("v-col"),k=s("v-date-input"),c=s("v-btn"),P=s("v-img"),x=s("v-row"),$=s("v-form"),C=s("v-container"),q=s("v-list-item"),z=s("v-list"),V=s("v-card");return f(),B("div",I,[t(V,{variant:"outlined",class:"rounded-lg bordered border-md bg-white h-100"},{default:a(()=>[n("div",{class:"px-4 py-3 d-flex align-center rental__header bg-orange-lighten-5",onClick:g},[t(d,{image:`${h(y)}/images/profile.svg`,size:"30"},null,8,["image"]),e[3]||(e[3]=n("span",{class:"ml-3 text-subtitle-1 font-weight-bold text-grey-darken-3"}," 松鶴餐廳 [ John Doe ] ",-1))]),t(C,{class:"pb-2 d-flex flex-column justify-space-between",style:{height:"calc(100% - 64px)"}},{default:a(()=>[t($,{ref_key:"searchFormRef",ref:b},{default:a(()=>[t(x,{dense:"",class:"flex-0-1"},{default:a(()=>[t(u,{cols:"12"},{default:a(()=>[...e[4]||(e[4]=[n("p",{class:"mt-1 mb-2 text-h6 text-blue-darken-3 text-center text-md-left"}," 折抵記錄查詢 ",-1)])]),_:1}),t(u,{cols:"12",md:"4"},{default:a(()=>[t(k,{modelValue:i.value.startDate,"onUpdate:modelValue":e[0]||(e[0]=o=>i.value.startDate=o),rules:D.value.startDateRule,"display-format":h(F),"prepend-icon":"","append-inner-icon":"fa:far fa-calendar-alt",placeholder:"起：2025-10-01",variant:"outlined",density:"compact",color:"blue-darken-2","bg-color":"white",required:""},null,8,["modelValue","rules","display-format"])]),_:1}),t(u,{cols:"12",md:"4"},{default:a(()=>[t(k,{modelValue:i.value.endDate,"onUpdate:modelValue":e[1]||(e[1]=o=>i.value.endDate=o),rules:D.value.endDateRule,"display-format":h(F),"prepend-icon":"","append-inner-icon":"fa:far fa-calendar-alt",placeholder:"迄：2025-10-01",variant:"outlined",density:"compact",color:"blue-darken-2","bg-color":"white",required:""},null,8,["modelValue","rules","display-format"])]),_:1}),t(u,{cols:"12"},{default:a(()=>[n("div",K,[t(c,{color:"blue-darken-2",variant:"flat",class:"px-8 w-75 w-sm-auto rounded-lg text-h6 font-weight-regular",height:"40",onClick:E(A,["prevent"])},{default:a(()=>[...e[5]||(e[5]=[m(" 查詢 ",-1)])]),_:1}),n("div",Q,[t(c,{color:"blue-darken-2",variant:"text",class:"px-2",height:"40"},{default:a(()=>[t(P,{height:"30",width:"35",src:`${h(y)}/images/ktorrent.svg`,cover:"",alt:"icon"},null,8,["src"])]),_:1})])])]),_:1})]),_:1})]),_:1},512),_.value.length>0?(f(),w(C,{key:0,class:"px-0 py-1"},{default:a(()=>[t(x,{"no-gutters":""},{default:a(()=>[t(u,{cols:"12"},{default:a(()=>[n("div",W,[t(c,{color:"grey-lighten-1",variant:"flat",class:"my-2 px-8 text-h6 font-weight-regular text-white flex-1-1 flex-md-0-0",height:"40",onClick:g},{default:a(()=>[...e[6]||(e[6]=[m(" 全部 ",-1)])]),_:1}),t(c,{color:"grey-lighten-1",variant:"flat",class:"my-2 px-8 text-h6 font-weight-regular text-white flex-1-1 flex-md-0-0",height:"40",onClick:g},{default:a(()=>[...e[7]||(e[7]=[m(" 折抵 ",-1)])]),_:1}),t(c,{color:"grey-lighten-1",variant:"flat",class:"my-2 px-8 text-h6 font-weight-regular text-white flex-1-1 flex-md-0-0",height:"40",onClick:g},{default:a(()=>[...e[8]||(e[8]=[m(" 儲值 ",-1)])]),_:1})])]),_:1})]),_:1})]),_:1})):N("",!0),_.value.length>0?(f(),w(V,{key:1,variant:"flat",class:"bg-white flex-grow-1 overflow-y-auto"},{default:a(()=>[t(z,null,{default:a(()=>[(f(!0),B(H,null,J(_.value,o=>(f(),w(q,{class:"pa-0 border",key:o.id},{default:a(()=>[n("div",Y,[t(x,{"no-gutters":"",class:"align-center flex-grow-1"},{default:a(()=>[t(u,{cols:"4",md:"3"},{default:a(()=>[n("div",ee,p(o.carNumber),1)]),_:2},1024),t(u,{cols:"2",md:"4",class:"pl-2 text-no-wrap"},{default:a(()=>[m(" -"+p(o.hour)+" 小時 ",1)]),_:2},1024),t(u,{cols:"5",md:"5",class:"pl-2 text-subtitle-1 text-grey-darken-2"},{default:a(()=>[n("div",te,[n("div",ae,p(o.startDate),1),n("div",le,p(o.shop)+" "+p(o.account),1)])]),_:2},1024)]),_:2},1024)])]),_:2},1024))),128))]),_:1})]),_:1})):N("",!0)]),_:1})]),_:1}),t(X,{modelValue:v.value,"onUpdate:modelValue":e[2]||(e[2]=o=>v.value=o),message:T.value,messageTitle:O.value,isConfirmBtn:U.value,onPromptConfirm:L,onOnClose:M},null,8,["modelValue","message","messageTitle","isConfirmBtn"])])}}};export{de as _};
