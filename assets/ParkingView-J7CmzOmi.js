import{h as s,r as W,y as U,a5 as o,ac as P,a7 as p,n as e,ad as t,v as f,V as B,a2 as z,Z as F,a6 as w,af as y,H as E,a0 as O,P as q,Q as H,u as X}from"./vue-core-BOLQPpeJ.js";import{_ as Q,a as Z,p as G}from"./PromptDialog-Df1okTK7.js";import{_ as J}from"./index-dcMGH9dB.js";import"./vuetify-B9nufYXq.js";import"./date-DE_Uv9Lq.js";const K={id:"search",class:"h-100"},Y={class:"ml-3 text-h6 font-weight-bold text-grey-darken-2"},ee={class:"d-flex ga-2 flex-wrap justify-end w-100"},L={__name:"SearchForm",props:{activeTab:{type:Object,default:()=>({})},formData:{type:Object,default:()=>({})}},emits:["update:formData","closeForm","sendForm"],setup(_,{expose:c,emit:l}){const m=_,v=l,u=s(),a=W(m.formData),h=s("https://picsum.photos/id/190/120/40"),d=s({phoneRules:[n=>!!n||"手機號碼為必填",n=>/^\d{10}$/.test(n)||"請輸入有效的手機號碼"],carRules:[n=>!!n||"車號為必填"],captchaRules:[n=>!!n||"驗證碼為必填"]});U(()=>m.formData,n=>{Object.assign(a,n)},{deep:!0}),U(()=>a,n=>{v("update:formData",n)},{deep:!0});const g=()=>{h.value=`https://picsum.photos/id/${Math.floor(Math.random()*1e3)}/120/40`},C=async()=>{const{valid:n}=await u.value.validate();n&&v("sendForm")},b=()=>{v("closeForm")};return c({initForm:()=>{u.value.reset()}}),(n,r)=>{const $=o("v-icon"),R=o("v-avatar"),T=o("v-text-field"),x=o("v-col"),A=o("v-img"),N=o("v-row"),S=o("v-btn"),j=o("v-container"),i=o("v-form"),M=o("v-card");return p(),P("div",K,[e(M,{variant:"outlined",class:"rounded-lg bordered border-md bg-white h-100"},{default:t(()=>[f("div",{class:"px-4 py-3 d-flex align-center bg-orange-lighten-5 rental__header",onClick:b},[e($,{icon:"fa:fas fa-chevron-left",size:"20",color:"grey-darken-1",class:"mr-2"}),e(R,{image:m.activeTab.icon,size:"40"},null,8,["image"]),f("span",Y,B(m.activeTab.title),1)]),e(i,{ref_key:"parkingFormRef",ref:u,class:"h-100",onSubmit:z(C,["prevent"])},{default:t(()=>[e(j,{class:"pb-2 d-flex flex-column justify-space-between",style:{height:"calc(100% - 64px)"}},{default:t(()=>[e(N,{dense:"",class:"flex-0-1"},{default:t(()=>[e(x,{cols:"12",md:"6"},{default:t(()=>[e(T,{modelValue:a.phoneNumber,"onUpdate:modelValue":r[0]||(r[0]=k=>a.phoneNumber=k),placeholder:"請輸入登記手機號碼",autocomplete:"off",variant:"outlined",density:"compact",color:"blue-darken-2",rules:d.value.phoneRules,required:""},null,8,["modelValue","rules"])]),_:1}),e(x,{cols:"12",md:"6"},{default:t(()=>[e(T,{modelValue:a.carNumber,"onUpdate:modelValue":r[1]||(r[1]=k=>a.carNumber=k),placeholder:"請輸入車號",autocomplete:"off",variant:"outlined",density:"compact",color:"blue-darken-2",rules:d.value.carRules,required:""},null,8,["modelValue","rules"])]),_:1}),e(x,{cols:"12",class:"py-0"},{default:t(()=>[...r[3]||(r[3]=[f("p",{class:"text-subtitle-1 font-weight-bold"},"驗證碼",-1)])]),_:1}),e(x,{cols:"12",md:"6"},{default:t(()=>[e(T,{modelValue:a.captcha,"onUpdate:modelValue":r[2]||(r[2]=k=>a.captcha=k),placeholder:"請輸入驗證碼",autocomplete:"off",variant:"outlined",density:"compact",color:"blue-darken-2",rules:d.value.captchaRules,required:""},{append:t(()=>[e(A,{color:"surface-variant",height:"40",width:"120",src:h.value,cover:"",alt:"captcha",onClick:g},null,8,["src"])]),_:1},8,["modelValue","rules"])]),_:1}),e(x,{cols:"12"},{default:t(()=>[...r[4]||(r[4]=[f("p",{class:"text-subtitle-2 text-red-darken-1"},[F(" 注意："),f("br"),F(" 更換車號請重新操作，入場當日無法更換登記車號。 ")],-1)])]),_:1})]),_:1}),e(N,{"no-gutters":"",class:"flex-0-1"},{default:t(()=>[e(x,{cols:"12",class:"mt-4"},{default:t(()=>[f("div",ee,[e(S,{type:"submit",color:"light-green-darken-2",variant:"flat",class:"my-2 px-8 w-100 w-sm-auto rounded-lg text-h6 font-weight-regular",height:"40"},{default:t(()=>[F(B(m.activeTab.value==="parking"?"登記":"查詢"),1)]),_:1}),e(S,{color:"blue-darken-3",variant:"flat",class:"my-2 px-8 w-100 w-sm-auto rounded-lg text-h6 font-weight-regular",height:"40",onClick:b},{default:t(()=>[...r[5]||(r[5]=[F(" 離開 ",-1)])]),_:1})])]),_:1})]),_:1})]),_:1})]),_:1},512)]),_:1})])}}},te={class:"d-flex flex-column align-center justify-center"},ae=["innerHTML"],oe={class:"d-flex ga-2 flex-wrap justify-center w-100"},ne={__name:"InfoView",props:{info:{type:String,default:""},infoStatus:{type:String,default:"success"}},emits:["infoClose","reWrite"],setup(_,{emit:c}){const l=c,m=()=>{l("infoClose")},v=()=>{l("reWrite")};return(u,a)=>{const h=o("v-icon"),d=o("v-btn"),g=o("v-col"),C=o("v-row"),b=o("v-container"),V=o("v-card");return p(),w(b,{class:"rental rental__wrapper flex-grow-1"},{default:t(()=>[e(V,{variant:"outlined",class:"mb-5 pt-5 d-flex flex-column justify-space-between rounded-lg bordered border-md bg-white h-100"},{default:t(()=>[f("div",te,[f("span",null,[e(h,{icon:_.infoStatus==="success"?"fa:fas fa-check-circle":_.infoStatus==="error"?"fa:fas fa-exclamation-triangle":"fa:fas fa-car",color:_.infoStatus==="success"?"green-accent-4":"amber-lighten-1",size:"120",class:"my-4"},null,8,["icon","color"])]),f("div",{class:"d-flex flex-column align-center justify-center pa-6",innerHTML:_.info},null,8,ae)]),e(b,{class:"py-2"},{default:t(()=>[e(C,{"no-gutters":""},{default:t(()=>[e(g,{cols:"12"},{default:t(()=>[f("div",oe,[_.infoStatus!=="error"?(p(),w(d,{key:0,color:"blue-darken-3",variant:"flat",class:"my-2 px-8 w-100 w-sm-auto rounded-lg text-h6 font-weight-regular",height:"40",onClick:m},{default:t(()=>[...a[0]||(a[0]=[F(" 離開 ",-1)])]),_:1})):y("",!0),_.infoStatus==="error"?(p(),w(d,{key:1,color:"orange-darken-3",variant:"flat",class:"my-2 px-8 w-100 w-sm-auto rounded-lg text-h6 font-weight-regular",height:"40",onClick:v},{default:t(()=>[...a[1]||(a[1]=[F(" 重新輸入 ",-1)])]),_:1})):y("",!0)])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})}}},le={id:"parkingView",class:"d-flex flex-column bg-grey-lighten-4 h-100"},se={__name:"ParkingView",setup(_){const c=s({}),l=s(!1),m=s(!1),v=s(),u=s({phoneNumber:"",carNumber:"",captcha:""}),a=s(!1),h=s(""),d=s(""),g=s(!1),C=s(""),b=s(""),V=s(!1),n=j=>{c.value=j,l.value=!0},r=async()=>{console.log("提交表單",u.value),C.value="登記手機號碼已有申請車輛",b.value="<p>此電話已經申請車號AAA-6895，確認是否要覆蓋原有車號？</p>",V.value=!0,g.value=!0,d.value="success",h.value=`<p class="text-h4 text-grey-darken-1 font-weight-bold my-2">
      已完成登記
    </p>
    <p class="rental__text--h45 text-grey-darken-1 font-weight-bold mt-3">
      車號
    </p>
    <p class="text-h5 text-amber-darken-3 font-weight-bold my-0">
      AAX-6895
    </p>
    <p class="rental__text--h45 text-grey-darken-1 font-weight-bold mt-4">
      停放日期
    </p>
    <p class="text-h5 text-amber-darken-3 font-weight-bold my-0">
      2025-10-09 ~ 2025-10-10
    </p>`},$=()=>{c.value={},a.value=!0,d.value="searchSuccess",h.value=`<p class="text-h4 text-grey-darken-1 font-weight-bold my-2">
      已完成登記
    </p>
    <p class="rental__text--h45 text-grey-darken-1 font-weight-bold mt-3">
      車號
    </p>
    <p class="text-h5 text-amber-darken-3 font-weight-bold my-0">
      AAX-6895
    </p>
    <p class="rental__text--h45 text-grey-darken-1 font-weight-bold mt-4">
      停放日期
    </p>
    <p class="text-h5 text-amber-darken-3 font-weight-bold my-0">
      2025-10-09 ~ 2025-10-10
    </p>`},R=()=>{c.value={},v.value.initForm(),l.value=!1},T=()=>{a.value=!1,l.value=!0},x=()=>{a.value=!1,l.value=!1,c.value={},u.value={phoneNumber:"",carNumber:"",captcha:""}},A=()=>{g.value=!1,a.value=!0,l.value=!1,d.value="success",v.value.initForm()},N=()=>{g.value=!1},S=()=>{m.value=window.innerWidth<=960};return E(()=>{S(),window.addEventListener("resize",S)}),O(()=>{window.removeEventListener("resize",S)}),(j,i)=>{const M=o("v-img"),k=o("v-card"),I=o("v-container");return p(),P("div",le,[q(e(I,{class:"pb-1 rental rental__wrapper"},{default:t(()=>[e(k,{variant:"elevated",elevation:"4",class:"pa-2"},{default:t(()=>[e(M,{color:"surface-variant",height:"200",width:"100%",src:"https://cdn.vuetifyjs.com/docs/images/cards/purple-flowers.jpg",cover:"",alt:"Parking Image"},{default:t(()=>[...i[3]||(i[3]=[f("h1",{class:"ml-6 mt-4 text-h5"},"住宿車輛登記",-1)])]),_:1})]),_:1}),!l.value&&!a.value?(p(),w(Z,{key:0,tabList:X(G),onSetActiveTab:n},null,8,["tabList"])):y("",!0)]),_:1},512),[[H,(!m.value||!l.value)&&!a.value]]),l.value&&c.value.value==="parking"?(p(),w(I,{key:0,id:"parking",class:"rental rental__wrapper flex-grow-1 overflow-y-hidden"},{default:t(()=>[e(L,{ref_key:"searchFormRef",ref:v,formData:u.value,"onUpdate:formData":i[0]||(i[0]=D=>u.value=D),activeTab:c.value,onCloseForm:R,onSendForm:r},null,8,["formData","activeTab"])]),_:1})):y("",!0),l.value&&c.value.value==="search"?(p(),w(I,{key:1,id:"search",class:"rental rental__wrapper flex-grow-1 overflow-y-hidden"},{default:t(()=>[e(L,{ref_key:"searchFormRef",ref:v,activeTab:c.value,formData:u.value,"onUpdate:formData":i[1]||(i[1]=D=>u.value=D),onCloseForm:R,onSendForm:$},null,8,["activeTab","formData"])]),_:1})):y("",!0),l.value&&c.value.value==="parkingInfo"?(p(),w(I,{key:2,id:"parkingInfo",class:"rental rental__wrapper flex-grow-1 overflow-y-hidden"},{default:t(()=>[...i[4]||(i[4]=[F(" parkingInfo ",-1)])]),_:1})):y("",!0),a.value?(p(),w(ne,{key:3,infoStatus:d.value,info:h.value,onInfoClose:x,onReWrite:T},null,8,["infoStatus","info"])):y("",!0),e(Q,{modelValue:g.value,"onUpdate:modelValue":i[2]||(i[2]=D=>g.value=D),message:b.value,messageTitle:C.value,isConfirmBtn:V.value,onPromptConfirm:A,onOnClose:N},null,8,["modelValue","message","messageTitle","isConfirmBtn"])])}}},fe=J(se,[["__scopeId","data-v-f49ea59d"]]);export{fe as default};
